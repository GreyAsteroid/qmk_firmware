   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"usb2422.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.USB_write2422_block,"ax",%progbits
  18              		.align	1
  19              		.global	USB_write2422_block
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	USB_write2422_block:
  27              	.LFB145:
  28              		.file 1 "tmk_core/protocol/arm_atsam/usb/usb2422.c"
   1:tmk_core/protocol/arm_atsam/usb/usb2422.c **** /*
   2:tmk_core/protocol/arm_atsam/usb/usb2422.c **** Copyright 2018 Massdrop Inc.
   3:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
   4:tmk_core/protocol/arm_atsam/usb/usb2422.c **** This program is free software: you can redistribute it and/or modify
   5:tmk_core/protocol/arm_atsam/usb/usb2422.c **** it under the terms of the GNU General Public License as published by
   6:tmk_core/protocol/arm_atsam/usb/usb2422.c **** the Free Software Foundation, either version 2 of the License, or
   7:tmk_core/protocol/arm_atsam/usb/usb2422.c **** (at your option) any later version.
   8:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
   9:tmk_core/protocol/arm_atsam/usb/usb2422.c **** This program is distributed in the hope that it will be useful,
  10:tmk_core/protocol/arm_atsam/usb/usb2422.c **** but WITHOUT ANY WARRANTY; without even the implied warranty of
  11:tmk_core/protocol/arm_atsam/usb/usb2422.c **** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  12:tmk_core/protocol/arm_atsam/usb/usb2422.c **** GNU General Public License for more details.
  13:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  14:tmk_core/protocol/arm_atsam/usb/usb2422.c **** You should have received a copy of the GNU General Public License
  15:tmk_core/protocol/arm_atsam/usb/usb2422.c **** along with this program.  If not, see <http://www.gnu.org/licenses/>.
  16:tmk_core/protocol/arm_atsam/usb/usb2422.c **** */
  17:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  18:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #include "arm_atsam_protocol.h"
  19:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #include <string.h>
  20:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  21:tmk_core/protocol/arm_atsam/usb/usb2422.c **** Usb2422       USB2422_shadow;
  22:tmk_core/protocol/arm_atsam/usb/usb2422.c **** unsigned char i2c0_buf[34];
  23:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  24:tmk_core/protocol/arm_atsam/usb/usb2422.c **** const uint16_t MFRNAME[] = {'M', 'a', 's', 's', 'd', 'r', 'o', 'p', ' ', 'I', 'n', 'c', '.'};  // M
  25:tmk_core/protocol/arm_atsam/usb/usb2422.c **** const uint16_t PRDNAME[] = {'M', 'a', 's', 's', 'd', 'r', 'o', 'p', ' ', 'H', 'u', 'b'};       // M
  26:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #ifndef MD_BOOTLOADER
  27:tmk_core/protocol/arm_atsam/usb/usb2422.c **** // Serial number reported stops before first found space character or at last found character
  28:tmk_core/protocol/arm_atsam/usb/usb2422.c **** const uint16_t SERNAME[] = {'U', 'n', 'a', 'v', 'a', 'i', 'l', 'a', 'b', 'l', 'e'};  // Unavailable
  29:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #else
  30:tmk_core/protocol/arm_atsam/usb/usb2422.c **** // In production, this field is found, modified, and offset noted as the last 32-bit word in the bo
  31:tmk_core/protocol/arm_atsam/usb/usb2422.c **** // The offset allows the application to use the factory programmed serial (which may differ from th
  32:tmk_core/protocol/arm_atsam/usb/usb2422.c **** // Serial number reported stops before first found space character or when max size is reached
  33:tmk_core/protocol/arm_atsam/usb/usb2422.c **** __attribute__((__aligned__(4))) const uint16_t SERNAME[BOOTLOADER_SERIAL_MAX_SIZE] = {'M', 'D', 'H'
  34:tmk_core/protocol/arm_atsam/usb/usb2422.c **** // NOTE: Serial replacer will not write a string longer than given here as a precaution, so give en
  35:tmk_core/protocol/arm_atsam/usb/usb2422.c **** //      space as needed and adjust BOOTLOADER_SERIAL_MAX_SIZE to match amount given
  36:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #endif  // MD_BOOTLOADER
  37:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  38:tmk_core/protocol/arm_atsam/usb/usb2422.c **** uint8_t usb_host_port;
  39:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  40:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #ifndef MD_BOOTLOADER
  41:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  42:tmk_core/protocol/arm_atsam/usb/usb2422.c **** uint8_t usb_extra_state;
  43:tmk_core/protocol/arm_atsam/usb/usb2422.c **** uint8_t usb_extra_manual;
  44:tmk_core/protocol/arm_atsam/usb/usb2422.c **** uint8_t usb_gcr_auto;
  45:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  46:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #endif  // MD_BOOTLOADER
  47:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  48:tmk_core/protocol/arm_atsam/usb/usb2422.c **** uint16_t adc_extra;
  49:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  50:tmk_core/protocol/arm_atsam/usb/usb2422.c **** void USB_write2422_block(void) {
  29              		.loc 1 50 32 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  51:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     unsigned char *dest = i2c0_buf;
  33              		.loc 1 51 5 view .LVU1
  34              	.LVL0:
  52:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     unsigned char *src;
  35              		.loc 1 52 5 view .LVU2
  53:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     unsigned char *base = (unsigned char *)&USB2422_shadow;
  36              		.loc 1 53 5 view .LVU3
  54:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  55:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     DBGC(DC_USB_WRITE2422_BLOCK_BEGIN);
  37              		.loc 1 55 5 view .LVU4
  50:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     unsigned char *dest = i2c0_buf;
  38              		.loc 1 50 32 is_stmt 0 view .LVU5
  39 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
  40              		.cfi_def_cfa_offset 24
  41              		.cfi_offset 4, -24
  42              		.cfi_offset 5, -20
  43              		.cfi_offset 6, -16
  44              		.cfi_offset 7, -12
  45              		.cfi_offset 8, -8
  46              		.cfi_offset 14, -4
  47              		.loc 1 55 5 view .LVU6
  48 0004 184C     		ldr	r4, .L8
  56:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  57:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     for (src = base; src < base + 256; src += 32) {
  58:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         dest[0] = src - base;
  49              		.loc 1 58 17 view .LVU7
  50 0006 194E     		ldr	r6, .L8+4
  59:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         dest[1] = 32;
  60:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         memcpy(&dest[2], src, 32);
  61:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         i2c0_transmit(USB2422_ADDR, dest, 34, 50000);
  62:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         SERCOM0->I2CM.CTRLB.bit.CMD = 0x03;
  51              		.loc 1 62 37 view .LVU8
  52 0008 194F     		ldr	r7, .L8+8
  55:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  53              		.loc 1 55 5 view .LVU9
  54 000a 4C23     		movs	r3, #76
  55 000c 2360     		str	r3, [r4]
  57:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         dest[0] = src - base;
  56              		.loc 1 57 5 is_stmt 1 view .LVU10
  57              	.LVL1:
  55:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  58              		.loc 1 55 5 is_stmt 0 view .LVU11
  59 000e 0025     		movs	r5, #0
  59:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         dest[1] = 32;
  60              		.loc 1 59 17 view .LVU12
  61 0010 4FF02008 		mov	r8, #32
  62              	.LVL2:
  63              	.L5:
  58:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         dest[1] = 32;
  64              		.loc 1 58 9 is_stmt 1 view .LVU13
  60:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         i2c0_transmit(USB2422_ADDR, dest, 34, 50000);
  65              		.loc 1 60 9 is_stmt 0 view .LVU14
  66 0014 174B     		ldr	r3, .L8+12
  67 0016 184A     		ldr	r2, .L8+16
  58:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         dest[1] = 32;
  68              		.loc 1 58 17 view .LVU15
  69 0018 3570     		strb	r5, [r6]
  59:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         memcpy(&dest[2], src, 32);
  70              		.loc 1 59 9 is_stmt 1 view .LVU16
  60:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         i2c0_transmit(USB2422_ADDR, dest, 34, 50000);
  71              		.loc 1 60 9 is_stmt 0 view .LVU17
  72 001a 2B44     		add	r3, r3, r5
  73              	.LVL3:
  59:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         memcpy(&dest[2], src, 32);
  74              		.loc 1 59 17 view .LVU18
  75 001c 86F80180 		strb	r8, [r6, #1]
  60:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         i2c0_transmit(USB2422_ADDR, dest, 34, 50000);
  76              		.loc 1 60 9 is_stmt 1 view .LVU19
  77 0020 03F12001 		add	r1, r3, #32
  78              	.LVL4:
  79              	.L2:
  60:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         i2c0_transmit(USB2422_ADDR, dest, 34, 50000);
  80              		.loc 1 60 9 is_stmt 0 view .LVU20
  81 0024 53F8040B 		ldr	r0, [r3], #4	@ unaligned
  82 0028 42F8040B 		str	r0, [r2], #4	@ unaligned
  83 002c 8B42     		cmp	r3, r1
  84 002e F9D1     		bne	.L2
  61:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         SERCOM0->I2CM.CTRLB.bit.CMD = 0x03;
  85              		.loc 1 61 9 is_stmt 1 view .LVU21
  86 0030 4CF25033 		movw	r3, #50000
  87 0034 2222     		movs	r2, #34
  88 0036 3146     		mov	r1, r6
  89              	.LVL5:
  61:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         SERCOM0->I2CM.CTRLB.bit.CMD = 0x03;
  90              		.loc 1 61 9 is_stmt 0 view .LVU22
  91 0038 5820     		movs	r0, #88
  92 003a FFF7FEFF 		bl	i2c0_transmit
  93              	.LVL6:
  94              		.loc 1 62 9 is_stmt 1 view .LVU23
  95              		.loc 1 62 37 is_stmt 0 view .LVU24
  96 003e 7B68     		ldr	r3, [r7, #4]
  97 0040 43F44033 		orr	r3, r3, #196608
  98 0044 7B60     		str	r3, [r7, #4]
  63:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         while (SERCOM0->I2CM.SYNCBUSY.bit.SYSOP) {
  99              		.loc 1 63 9 is_stmt 1 view .LVU25
  64:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             DBGC(DC_USB_WRITE2422_BLOCK_SYNC_SYSOP);
 100              		.loc 1 64 13 is_stmt 0 view .LVU26
 101 0046 4D22     		movs	r2, #77
 102              	.L3:
  63:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         while (SERCOM0->I2CM.SYNCBUSY.bit.SYSOP) {
 103              		.loc 1 63 42 view .LVU27
 104 0048 FB69     		ldr	r3, [r7, #28]
  63:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         while (SERCOM0->I2CM.SYNCBUSY.bit.SYSOP) {
 105              		.loc 1 63 15 view .LVU28
 106 004a 5B07     		lsls	r3, r3, #29
 107 004c 0AD4     		bmi	.L4
  65:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         }
  66:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         wait_us(100);
 108              		.loc 1 66 9 is_stmt 1 discriminator 2 view .LVU29
 109 004e 6420     		movs	r0, #100
 110 0050 2035     		adds	r5, r5, #32
 111              	.LVL7:
 112              		.loc 1 66 9 is_stmt 0 discriminator 2 view .LVU30
 113 0052 FFF7FEFF 		bl	CLK_delay_us
 114              	.LVL8:
  57:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         dest[0] = src - base;
 115              		.loc 1 57 5 discriminator 2 view .LVU31
 116 0056 B5F5807F 		cmp	r5, #256
 117 005a DBD1     		bne	.L5
  67:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
  68:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  69:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     DBGC(DC_USB_WRITE2422_BLOCK_COMPLETE);
 118              		.loc 1 69 5 is_stmt 1 view .LVU32
 119 005c 4E23     		movs	r3, #78
 120 005e 2360     		str	r3, [r4]
  70:tmk_core/protocol/arm_atsam/usb/usb2422.c **** }
 121              		.loc 1 70 1 is_stmt 0 view .LVU33
 122 0060 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 123              	.LVL9:
 124              	.L4:
  64:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         }
 125              		.loc 1 64 13 is_stmt 1 view .LVU34
 126 0064 2260     		str	r2, [r4]
 127 0066 EFE7     		b	.L3
 128              	.L9:
 129              		.align	2
 130              	.L8:
 131 0068 00000000 		.word	debug_code
 132 006c 00000000 		.word	i2c0_buf
 133 0070 00300040 		.word	1073754112
 134 0074 00000000 		.word	USB2422_shadow
 135 0078 02000000 		.word	i2c0_buf+2
 136              		.cfi_endproc
 137              	.LFE145:
 139              		.section	.text.USB2422_init,"ax",%progbits
 140              		.align	1
 141              		.global	USB2422_init
 142              		.syntax unified
 143              		.thumb
 144              		.thumb_func
 145              		.fpu fpv4-sp-d16
 147              	USB2422_init:
 148              	.LFB146:
  71:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  72:tmk_core/protocol/arm_atsam/usb/usb2422.c **** void USB2422_init(void) {
 149              		.loc 1 72 25 view -0
 150              		.cfi_startproc
 151              		@ args = 0, pretend = 0, frame = 0
 152              		@ frame_needed = 0, uses_anonymous_args = 0
  73:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     Gclk *   pgclk = GCLK;
 153              		.loc 1 73 5 view .LVU36
 154              	.LVL10:
  74:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     Mclk *   pmclk = MCLK;
 155              		.loc 1 74 5 view .LVU37
  75:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     Port *   pport = PORT;
 156              		.loc 1 75 5 view .LVU38
  76:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     Oscctrl *posc  = OSCCTRL;
 157              		.loc 1 76 5 view .LVU39
  77:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     Usb *    pusb  = USB;
 158              		.loc 1 77 5 view .LVU40
  78:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  79:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     DBGC(DC_USB2422_INIT_BEGIN);
 159              		.loc 1 79 5 view .LVU41
  72:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     Gclk *   pgclk = GCLK;
 160              		.loc 1 72 25 is_stmt 0 view .LVU42
 161 0000 70B5     		push	{r4, r5, r6, lr}
 162              		.cfi_def_cfa_offset 16
 163              		.cfi_offset 4, -16
 164              		.cfi_offset 5, -12
 165              		.cfi_offset 6, -8
 166              		.cfi_offset 14, -4
 167              		.loc 1 79 5 view .LVU43
 168 0002 814C     		ldr	r4, .L33
  80:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  81:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while ((v_5v = adc_get(ADC_5V)) < ADC_5V_START_LEVEL) {
 169              		.loc 1 81 18 view .LVU44
 170 0004 814E     		ldr	r6, .L33+4
  79:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 171              		.loc 1 79 5 view .LVU45
 172 0006 6D23     		movs	r3, #109
 173 0008 2360     		str	r3, [r4]
 174              		.loc 1 81 5 is_stmt 1 view .LVU46
 175              		.loc 1 81 11 is_stmt 0 view .LVU47
 176 000a 40F63C15 		movw	r5, #2364
 177              	.L11:
 178              		.loc 1 81 20 view .LVU48
 179 000e 0C20     		movs	r0, #12
 180 0010 FFF7FEFF 		bl	adc_get
 181              	.LVL11:
 182              		.loc 1 81 11 view .LVU49
 183 0014 A842     		cmp	r0, r5
 184              		.loc 1 81 18 view .LVU50
 185 0016 3080     		strh	r0, [r6]	@ movhi
 186              		.loc 1 81 11 view .LVU51
 187 0018 40F2DF80 		bls	.L12
  82:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         DBGC(DC_USB2422_INIT_WAIT_5V_LOW);
  83:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
  84:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  85:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // setup peripheral and synchronous bus clocks to USB
  86:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pgclk->PCHCTRL[10].bit.GEN  = 0;
 188              		.loc 1 86 5 is_stmt 1 view .LVU52
 189              		.loc 1 86 33 is_stmt 0 view .LVU53
 190 001c 7C4B     		ldr	r3, .L33+8
 191 001e D3F8A820 		ldr	r2, [r3, #168]
 192 0022 6FF30302 		bfc	r2, #0, #4
 193 0026 C3F8A820 		str	r2, [r3, #168]
  87:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pgclk->PCHCTRL[10].bit.CHEN = 1;
 194              		.loc 1 87 5 is_stmt 1 view .LVU54
 195              		.loc 1 87 33 is_stmt 0 view .LVU55
 196 002a D3F8A820 		ldr	r2, [r3, #168]
 197 002e 42F04002 		orr	r2, r2, #64
 198 0032 C3F8A820 		str	r2, [r3, #168]
  88:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pmclk->AHBMASK.bit.USB_     = 1;
 199              		.loc 1 88 5 is_stmt 1 view .LVU56
 200              		.loc 1 88 33 is_stmt 0 view .LVU57
 201 0036 A3F5A053 		sub	r3, r3, #5120
  89:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pmclk->APBBMASK.bit.USB_    = 1;
  90:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  91:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // setup port pins for D-, D+, and SOF_1KHZ
  92:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pport->Group[0].PMUX[12].reg          = 0x77;  // PA24, PA25, function column H for USB D-, D+
  93:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pport->Group[0].PINCFG[24].bit.PMUXEN = 1;
  94:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pport->Group[0].PINCFG[25].bit.PMUXEN = 1;
  95:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pport->Group[1].PMUX[11].bit.PMUXE    = 7;  // PB22, function column H for USB SOF_1KHz output
 202              		.loc 1 95 43 view .LVU58
 203 003a 0721     		movs	r1, #7
  88:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pmclk->AHBMASK.bit.USB_     = 1;
 204              		.loc 1 88 33 view .LVU59
 205 003c 1A69     		ldr	r2, [r3, #16]
 206 003e 42F48062 		orr	r2, r2, #1024
 207 0042 1A61     		str	r2, [r3, #16]
  89:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pmclk->APBBMASK.bit.USB_    = 1;
 208              		.loc 1 89 5 is_stmt 1 view .LVU60
  89:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pmclk->APBBMASK.bit.USB_    = 1;
 209              		.loc 1 89 33 is_stmt 0 view .LVU61
 210 0044 9A69     		ldr	r2, [r3, #24]
 211 0046 42F00102 		orr	r2, r2, #1
 212 004a 9A61     		str	r2, [r3, #24]
  92:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pport->Group[0].PINCFG[24].bit.PMUXEN = 1;
 213              		.loc 1 92 5 is_stmt 1 view .LVU62
  92:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pport->Group[0].PINCFG[24].bit.PMUXEN = 1;
 214              		.loc 1 92 43 is_stmt 0 view .LVU63
 215 004c 714B     		ldr	r3, .L33+12
 216 004e 7722     		movs	r2, #119
 217 0050 83F83C20 		strb	r2, [r3, #60]
  93:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pport->Group[0].PINCFG[25].bit.PMUXEN = 1;
 218              		.loc 1 93 5 is_stmt 1 view .LVU64
  93:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pport->Group[0].PINCFG[25].bit.PMUXEN = 1;
 219              		.loc 1 93 43 is_stmt 0 view .LVU65
 220 0054 93F85820 		ldrb	r2, [r3, #88]	@ zero_extendqisi2
 221 0058 42F00102 		orr	r2, r2, #1
 222 005c 83F85820 		strb	r2, [r3, #88]
  94:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pport->Group[1].PMUX[11].bit.PMUXE    = 7;  // PB22, function column H for USB SOF_1KHz output
 223              		.loc 1 94 5 is_stmt 1 view .LVU66
  94:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pport->Group[1].PMUX[11].bit.PMUXE    = 7;  // PB22, function column H for USB SOF_1KHz output
 224              		.loc 1 94 43 is_stmt 0 view .LVU67
 225 0060 93F85920 		ldrb	r2, [r3, #89]	@ zero_extendqisi2
 226 0064 42F00102 		orr	r2, r2, #1
 227 0068 83F85920 		strb	r2, [r3, #89]
 228              		.loc 1 95 5 is_stmt 1 view .LVU68
 229              		.loc 1 95 43 is_stmt 0 view .LVU69
 230 006c 93F8BB20 		ldrb	r2, [r3, #187]	@ zero_extendqisi2
 231 0070 61F30302 		bfi	r2, r1, #0, #4
 232 0074 83F8BB20 		strb	r2, [r3, #187]
  96:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pport->Group[1].PINCFG[22].bit.PMUXEN = 1;
 233              		.loc 1 96 5 is_stmt 1 view .LVU70
 234              		.loc 1 96 43 is_stmt 0 view .LVU71
 235 0078 93F8D620 		ldrb	r2, [r3, #214]	@ zero_extendqisi2
 236 007c 42F00102 		orr	r2, r2, #1
 237 0080 83F8D620 		strb	r2, [r3, #214]
  97:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
  98:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // configure and enable DFLL for USB clock recovery mode at 48MHz
  99:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     posc->DFLLCTRLA.bit.ENABLE = 0;
 238              		.loc 1 99 5 is_stmt 1 view .LVU72
 239              		.loc 1 99 32 is_stmt 0 view .LVU73
 240 0084 644B     		ldr	r3, .L33+16
 241 0086 1A7F     		ldrb	r2, [r3, #28]	@ zero_extendqisi2
 242 0088 6FF34102 		bfc	r2, #1, #1
 243 008c 1A77     		strb	r2, [r3, #28]
 100:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.ENABLE) {
 244              		.loc 1 100 5 is_stmt 1 view .LVU74
 101:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         DBGC(DC_USB2422_INIT_OSC_SYNC_DISABLING);
 245              		.loc 1 101 9 is_stmt 0 view .LVU75
 246 008e 6F21     		movs	r1, #111
 247              	.L13:
 100:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.ENABLE) {
 248              		.loc 1 100 30 view .LVU76
 249 0090 93F82C20 		ldrb	r2, [r3, #44]	@ zero_extendqisi2
 100:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.ENABLE) {
 250              		.loc 1 100 11 view .LVU77
 251 0094 9507     		lsls	r5, r2, #30
 252 0096 00F1A380 		bmi	.L14
 102:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 103:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.DFLLCTRLB) {
 253              		.loc 1 103 30 view .LVU78
 254 009a 5F4B     		ldr	r3, .L33+16
 104:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         DBGC(DC_USB2422_INIT_OSC_SYNC_DFLLCTRLB_1);
 255              		.loc 1 104 9 view .LVU79
 256 009c 7021     		movs	r1, #112
 257              	.L15:
 103:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         DBGC(DC_USB2422_INIT_OSC_SYNC_DFLLCTRLB_1);
 258              		.loc 1 103 30 view .LVU80
 259 009e 93F82C20 		ldrb	r2, [r3, #44]	@ zero_extendqisi2
 103:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         DBGC(DC_USB2422_INIT_OSC_SYNC_DFLLCTRLB_1);
 260              		.loc 1 103 11 view .LVU81
 261 00a2 5007     		lsls	r0, r2, #29
 262 00a4 00F19E80 		bmi	.L16
 105:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 106:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     posc->DFLLCTRLB.bit.USBCRM = 1;
 263              		.loc 1 106 5 is_stmt 1 view .LVU82
 264              		.loc 1 106 32 is_stmt 0 view .LVU83
 265 00a8 93F82020 		ldrb	r2, [r3, #32]	@ zero_extendqisi2
 266 00ac 42F00802 		orr	r2, r2, #8
 267 00b0 83F82020 		strb	r2, [r3, #32]
 107:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.DFLLCTRLB) {
 268              		.loc 1 107 5 is_stmt 1 view .LVU84
 269              		.loc 1 107 30 is_stmt 0 view .LVU85
 270 00b4 584B     		ldr	r3, .L33+16
 108:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         DBGC(DC_USB2422_INIT_OSC_SYNC_DFLLCTRLB_2);
 271              		.loc 1 108 9 view .LVU86
 272 00b6 7121     		movs	r1, #113
 273              	.L17:
 107:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.DFLLCTRLB) {
 274              		.loc 1 107 30 view .LVU87
 275 00b8 93F82C20 		ldrb	r2, [r3, #44]	@ zero_extendqisi2
 107:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.DFLLCTRLB) {
 276              		.loc 1 107 11 view .LVU88
 277 00bc 5207     		lsls	r2, r2, #29
 278 00be 00F19380 		bmi	.L18
 109:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 110:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     posc->DFLLCTRLB.bit.MODE = 1;
 279              		.loc 1 110 5 is_stmt 1 view .LVU89
 280              		.loc 1 110 30 is_stmt 0 view .LVU90
 281 00c2 93F82020 		ldrb	r2, [r3, #32]	@ zero_extendqisi2
 111:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.DFLLCTRLB) {
 282              		.loc 1 111 30 view .LVU91
 283 00c6 5449     		ldr	r1, .L33+16
 110:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.DFLLCTRLB) {
 284              		.loc 1 110 30 view .LVU92
 285 00c8 42F00102 		orr	r2, r2, #1
 286 00cc 83F82020 		strb	r2, [r3, #32]
 287              		.loc 1 111 5 is_stmt 1 view .LVU93
 112:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         DBGC(DC_USB2422_INIT_OSC_SYNC_DFLLCTRLB_3);
 288              		.loc 1 112 9 is_stmt 0 view .LVU94
 289 00d0 7223     		movs	r3, #114
 290              	.L19:
 111:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.DFLLCTRLB) {
 291              		.loc 1 111 30 view .LVU95
 292 00d2 91F82C20 		ldrb	r2, [r1, #44]	@ zero_extendqisi2
 293 00d6 C2F38002 		ubfx	r2, r2, #2, #1
 111:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.DFLLCTRLB) {
 294              		.loc 1 111 11 view .LVU96
 295 00da 002A     		cmp	r2, #0
 296 00dc 40F08680 		bne	.L20
 113:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 114:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     posc->DFLLCTRLB.bit.QLDIS = 0;
 297              		.loc 1 114 5 is_stmt 1 view .LVU97
 298              		.loc 1 114 31 is_stmt 0 view .LVU98
 299 00e0 91F82030 		ldrb	r3, [r1, #32]	@ zero_extendqisi2
 300 00e4 62F34513 		bfi	r3, r2, #5, #1
 301 00e8 81F82030 		strb	r3, [r1, #32]
 115:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.DFLLCTRLB) {
 302              		.loc 1 115 5 is_stmt 1 view .LVU99
 303              		.loc 1 115 30 is_stmt 0 view .LVU100
 304 00ec 4A4B     		ldr	r3, .L33+16
 116:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         DBGC(DC_USB2422_INIT_OSC_SYNC_DFLLCTRLB_4);
 305              		.loc 1 116 9 view .LVU101
 306 00ee 7321     		movs	r1, #115
 307              	.L21:
 115:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.DFLLCTRLB) {
 308              		.loc 1 115 30 view .LVU102
 309 00f0 93F82C20 		ldrb	r2, [r3, #44]	@ zero_extendqisi2
 115:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.DFLLCTRLB) {
 310              		.loc 1 115 11 view .LVU103
 311 00f4 5607     		lsls	r6, r2, #29
 312 00f6 7BD4     		bmi	.L22
 117:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 118:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     posc->DFLLCTRLB.bit.CCDIS = 1;
 313              		.loc 1 118 5 is_stmt 1 view .LVU104
 314              		.loc 1 118 31 is_stmt 0 view .LVU105
 315 00f8 93F82020 		ldrb	r2, [r3, #32]	@ zero_extendqisi2
 316 00fc 42F01002 		orr	r2, r2, #16
 317 0100 83F82020 		strb	r2, [r3, #32]
 119:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     posc->DFLLMUL.bit.MUL     = 0xBB80;  // 4800 x 1KHz
 318              		.loc 1 119 5 is_stmt 1 view .LVU106
 319              		.loc 1 119 31 is_stmt 0 view .LVU107
 320 0104 9A6A     		ldr	r2, [r3, #40]
 321 0106 4BF68031 		movw	r1, #48000
 322 010a 61F30F02 		bfi	r2, r1, #0, #16
 323 010e 9A62     		str	r2, [r3, #40]
 120:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.DFLLMUL) {
 324              		.loc 1 120 5 is_stmt 1 view .LVU108
 325              		.loc 1 120 30 is_stmt 0 view .LVU109
 326 0110 414B     		ldr	r3, .L33+16
 121:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         DBGC(DC_USB2422_INIT_OSC_SYNC_DFLLMUL);
 327              		.loc 1 121 9 view .LVU110
 328 0112 7421     		movs	r1, #116
 329              	.L23:
 120:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.DFLLMUL) {
 330              		.loc 1 120 30 view .LVU111
 331 0114 93F82C20 		ldrb	r2, [r3, #44]	@ zero_extendqisi2
 120:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.DFLLMUL) {
 332              		.loc 1 120 11 view .LVU112
 333 0118 D506     		lsls	r5, r2, #27
 334 011a 6BD4     		bmi	.L24
 122:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 123:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     posc->DFLLCTRLA.bit.ENABLE = 1;
 335              		.loc 1 123 5 is_stmt 1 view .LVU113
 336              		.loc 1 123 32 is_stmt 0 view .LVU114
 337 011c 1A7F     		ldrb	r2, [r3, #28]	@ zero_extendqisi2
 338 011e 42F00202 		orr	r2, r2, #2
 339 0122 1A77     		strb	r2, [r3, #28]
 124:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.ENABLE) {
 340              		.loc 1 124 5 is_stmt 1 view .LVU115
 341              		.loc 1 124 30 is_stmt 0 view .LVU116
 342 0124 3C4A     		ldr	r2, .L33+16
 125:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         DBGC(DC_USB2422_INIT_OSC_SYNC_ENABLING);
 343              		.loc 1 125 9 view .LVU117
 344 0126 7521     		movs	r1, #117
 345              	.L25:
 124:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.ENABLE) {
 346              		.loc 1 124 30 view .LVU118
 347 0128 92F82C30 		ldrb	r3, [r2, #44]	@ zero_extendqisi2
 124:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (posc->DFLLSYNC.bit.ENABLE) {
 348              		.loc 1 124 11 view .LVU119
 349 012c 9807     		lsls	r0, r3, #30
 350 012e 63D4     		bmi	.L26
 126:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 127:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 128:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb->DEVICE.CTRLA.bit.SWRST = 1;
 351              		.loc 1 128 5 is_stmt 1 view .LVU120
 352              		.loc 1 128 34 is_stmt 0 view .LVU121
 353 0130 4FF08243 		mov	r3, #1090519040
 129:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (pusb->DEVICE.SYNCBUSY.bit.SWRST) {
 130:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         DBGC(DC_USB2422_INIT_USB_SYNC_SWRST);
 354              		.loc 1 130 9 view .LVU122
 355 0134 7621     		movs	r1, #118
 128:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (pusb->DEVICE.SYNCBUSY.bit.SWRST) {
 356              		.loc 1 128 34 view .LVU123
 357 0136 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 358 0138 42F00102 		orr	r2, r2, #1
 359 013c 1A70     		strb	r2, [r3]
 129:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (pusb->DEVICE.SYNCBUSY.bit.SWRST) {
 360              		.loc 1 129 5 is_stmt 1 view .LVU124
 361              	.L27:
 129:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (pusb->DEVICE.SYNCBUSY.bit.SWRST) {
 362              		.loc 1 129 37 is_stmt 0 view .LVU125
 363 013e 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 129:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (pusb->DEVICE.SYNCBUSY.bit.SWRST) {
 364              		.loc 1 129 11 view .LVU126
 365 0140 D207     		lsls	r2, r2, #31
 366 0142 5BD4     		bmi	.L28
 131:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 132:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (pusb->DEVICE.CTRLA.bit.SWRST) {
 367              		.loc 1 132 34 view .LVU127
 368 0144 4FF08243 		mov	r3, #1090519040
 133:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         DBGC(DC_USB2422_INIT_USB_WAIT_SWRST);
 369              		.loc 1 133 9 view .LVU128
 370 0148 7721     		movs	r1, #119
 371              	.L29:
 132:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         DBGC(DC_USB2422_INIT_USB_WAIT_SWRST);
 372              		.loc 1 132 34 view .LVU129
 373 014a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 132:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         DBGC(DC_USB2422_INIT_USB_WAIT_SWRST);
 374              		.loc 1 132 11 view .LVU130
 375 014c 12F00102 		ands	r2, r2, #1
 376 0150 56D1     		bne	.L30
 134:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 135:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // calibration from factory presets
 136:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb->DEVICE.PADCAL.bit.TRANSN = (USB_FUSES_TRANSN_ADDR >> USB_FUSES_TRANSN_Pos) & USB_FUSES_TR
 377              		.loc 1 136 5 is_stmt 1 view .LVU131
 378              		.loc 1 136 36 is_stmt 0 view .LVU132
 379 0152 198D     		ldrh	r1, [r3, #40]
 380 0154 0420     		movs	r0, #4
 381 0156 60F38A11 		bfi	r1, r0, #6, #5
 382 015a 1985     		strh	r1, [r3, #40]	@ movhi
 137:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb->DEVICE.PADCAL.bit.TRANSP = (USB_FUSES_TRANSP_ADDR >> USB_FUSES_TRANSP_Pos) & USB_FUSES_TR
 383              		.loc 1 137 5 is_stmt 1 view .LVU133
 384              		.loc 1 137 36 is_stmt 0 view .LVU134
 385 015c 198D     		ldrh	r1, [r3, #40]
 386 015e 62F30401 		bfi	r1, r2, #0, #5
 387 0162 1985     		strh	r1, [r3, #40]	@ movhi
 138:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb->DEVICE.PADCAL.bit.TRIM   = (USB_FUSES_TRIM_ADDR >> USB_FUSES_TRIM_Pos) & USB_FUSES_TRIM_M
 388              		.loc 1 138 5 is_stmt 1 view .LVU135
 389              		.loc 1 138 36 is_stmt 0 view .LVU136
 390 0164 198D     		ldrh	r1, [r3, #40]
 391 0166 62F30E31 		bfi	r1, r2, #12, #3
 392 016a 1985     		strh	r1, [r3, #40]	@ movhi
 139:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // device mode, enabled
 140:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb->DEVICE.CTRLB.bit.SPDCONF = 0;  // full speed
 393              		.loc 1 140 5 is_stmt 1 view .LVU137
 394              		.loc 1 140 36 is_stmt 0 view .LVU138
 395 016c 1989     		ldrh	r1, [r3, #8]
 396 016e 62F38301 		bfi	r1, r2, #2, #2
 397 0172 1981     		strh	r1, [r3, #8]	@ movhi
 141:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb->DEVICE.CTRLA.bit.MODE    = 0;
 398              		.loc 1 141 5 is_stmt 1 view .LVU139
 399              		.loc 1 141 36 is_stmt 0 view .LVU140
 400 0174 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 401 0176 62F3C711 		bfi	r1, r2, #7, #1
 402 017a 1970     		strb	r1, [r3]
 142:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb->DEVICE.CTRLA.bit.ENABLE  = 1;
 403              		.loc 1 142 5 is_stmt 1 view .LVU141
 404              		.loc 1 142 36 is_stmt 0 view .LVU142
 405 017c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 406 017e 42F00202 		orr	r2, r2, #2
 407 0182 1A70     		strb	r2, [r3]
 143:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (pusb->DEVICE.SYNCBUSY.bit.ENABLE) {
 408              		.loc 1 143 5 is_stmt 1 view .LVU143
 409              		.loc 1 143 37 is_stmt 0 view .LVU144
 410 0184 4FF08243 		mov	r3, #1090519040
 144:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         DBGC(DC_USB2422_INIT_USB_SYNC_ENABLING);
 411              		.loc 1 144 9 view .LVU145
 412 0188 7822     		movs	r2, #120
 413              	.L31:
 143:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (pusb->DEVICE.SYNCBUSY.bit.ENABLE) {
 414              		.loc 1 143 37 view .LVU146
 415 018a 9D78     		ldrb	r5, [r3, #2]	@ zero_extendqisi2
 416 018c C5F34005 		ubfx	r5, r5, #1, #1
 143:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (pusb->DEVICE.SYNCBUSY.bit.ENABLE) {
 417              		.loc 1 143 11 view .LVU147
 418 0190 002D     		cmp	r5, #0
 419 0192 37D1     		bne	.L32
 145:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 146:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 147:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb->DEVICE.QOSCTRL.bit.DQOS = 2;
 420              		.loc 1 147 5 is_stmt 1 view .LVU148
 421              		.loc 1 147 35 is_stmt 0 view .LVU149
 422 0194 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 423 0196 0221     		movs	r1, #2
 424 0198 61F38302 		bfi	r2, r1, #2, #2
 425 019c DA70     		strb	r2, [r3, #3]
 148:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb->DEVICE.QOSCTRL.bit.CQOS = 2;
 426              		.loc 1 148 5 is_stmt 1 view .LVU150
 427              		.loc 1 148 35 is_stmt 0 view .LVU151
 428 019e DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 429 01a0 61F30102 		bfi	r2, r1, #0, #2
 430 01a4 DA70     		strb	r2, [r3, #3]
 149:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 150:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pport->Group[USB2422_HUB_ACTIVE_GROUP].PINCFG[USB2422_HUB_ACTIVE_PIN].bit.INEN = 1;
 431              		.loc 1 150 5 is_stmt 1 view .LVU152
 432              		.loc 1 150 84 is_stmt 0 view .LVU153
 433 01a6 1B4A     		ldr	r2, .L33+12
 434 01a8 92F85230 		ldrb	r3, [r2, #82]	@ zero_extendqisi2
 435 01ac 0B43     		orrs	r3, r3, r1
 436 01ae 82F85230 		strb	r3, [r2, #82]
 151:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 152:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     i2c0_init();  // IC2 clk must be high at USB2422 reset release time to signal SMB configuration
 437              		.loc 1 152 5 is_stmt 1 view .LVU154
 438 01b2 FFF7FEFF 		bl	i2c0_init
 439              	.LVL12:
 153:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 154:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.HUB_CONNECT = 1;  // connect signal
 440              		.loc 1 154 5 view .LVU155
 155:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.HUB_RESET_N = 1;  // reset high
 441              		.loc 1 155 5 view .LVU156
 442              		.loc 1 155 33 is_stmt 0 view .LVU157
 443 01b6 194A     		ldr	r2, .L33+20
 444 01b8 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 445 01ba 63F03F03 		orn	r3, r3, #63
 446 01be 5370     		strb	r3, [r2, #1]
 156:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     SR_EXP_WriteData();
 447              		.loc 1 156 5 is_stmt 1 view .LVU158
 448 01c0 FFF7FEFF 		bl	SR_EXP_WriteData
 449              	.LVL13:
 157:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 158:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     wait_us(100);
 450              		.loc 1 158 5 view .LVU159
 451 01c4 6420     		movs	r0, #100
 452 01c6 FFF7FEFF 		bl	CLK_delay_us
 453              	.LVL14:
 159:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 160:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #ifndef MD_BOOTLOADER
 161:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 162:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     usb_extra_manual = 0;
 454              		.loc 1 162 5 view .LVU160
 455              		.loc 1 162 22 is_stmt 0 view .LVU161
 456 01ca 154B     		ldr	r3, .L33+24
 457 01cc 1D70     		strb	r5, [r3]
 163:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     usb_gcr_auto     = 1;
 458              		.loc 1 163 5 is_stmt 1 view .LVU162
 459              		.loc 1 163 22 is_stmt 0 view .LVU163
 460 01ce 154B     		ldr	r3, .L33+28
 461 01d0 0122     		movs	r2, #1
 462 01d2 1A70     		strb	r2, [r3]
 164:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 165:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #endif  // MD_BOOTLOADER
 166:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 167:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     DBGC(DC_USB2422_INIT_COMPLETE);
 463              		.loc 1 167 5 is_stmt 1 view .LVU164
 464 01d4 7923     		movs	r3, #121
 465 01d6 2360     		str	r3, [r4]
 168:tmk_core/protocol/arm_atsam/usb/usb2422.c **** }
 466              		.loc 1 168 1 is_stmt 0 view .LVU165
 467 01d8 70BD     		pop	{r4, r5, r6, pc}
 468              	.L12:
  82:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 469              		.loc 1 82 9 is_stmt 1 view .LVU166
 470 01da 6E23     		movs	r3, #110
 471 01dc 2360     		str	r3, [r4]
 472 01de 16E7     		b	.L11
 473              	.L14:
 101:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 474              		.loc 1 101 9 view .LVU167
 475 01e0 2160     		str	r1, [r4]
 476 01e2 55E7     		b	.L13
 477              	.L16:
 104:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 478              		.loc 1 104 9 view .LVU168
 479 01e4 2160     		str	r1, [r4]
 480 01e6 5AE7     		b	.L15
 481              	.L18:
 108:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 482              		.loc 1 108 9 view .LVU169
 483 01e8 2160     		str	r1, [r4]
 484 01ea 65E7     		b	.L17
 485              	.L20:
 112:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 486              		.loc 1 112 9 view .LVU170
 487 01ec 2360     		str	r3, [r4]
 488 01ee 70E7     		b	.L19
 489              	.L22:
 116:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 490              		.loc 1 116 9 view .LVU171
 491 01f0 2160     		str	r1, [r4]
 492 01f2 7DE7     		b	.L21
 493              	.L24:
 121:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 494              		.loc 1 121 9 view .LVU172
 495 01f4 2160     		str	r1, [r4]
 496 01f6 8DE7     		b	.L23
 497              	.L26:
 125:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 498              		.loc 1 125 9 view .LVU173
 499 01f8 2160     		str	r1, [r4]
 500 01fa 95E7     		b	.L25
 501              	.L28:
 130:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 502              		.loc 1 130 9 view .LVU174
 503 01fc 2160     		str	r1, [r4]
 504 01fe 9EE7     		b	.L27
 505              	.L30:
 133:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 506              		.loc 1 133 9 view .LVU175
 507 0200 2160     		str	r1, [r4]
 508 0202 A2E7     		b	.L29
 509              	.L32:
 144:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 510              		.loc 1 144 9 view .LVU176
 511 0204 2260     		str	r2, [r4]
 512 0206 C0E7     		b	.L31
 513              	.L34:
 514              		.align	2
 515              	.L33:
 516 0208 00000000 		.word	debug_code
 517 020c 00000000 		.word	v_5v
 518 0210 001C0040 		.word	1073748992
 519 0214 00800041 		.word	1090551808
 520 0218 00100040 		.word	1073745920
 521 021c 00000000 		.word	sr_exp_data
 522 0220 00000000 		.word	usb_extra_manual
 523 0224 00000000 		.word	usb_gcr_auto
 524              		.cfi_endproc
 525              	.LFE146:
 527              		.section	.text.USB_reset,"ax",%progbits
 528              		.align	1
 529              		.global	USB_reset
 530              		.syntax unified
 531              		.thumb
 532              		.thumb_func
 533              		.fpu fpv4-sp-d16
 535              	USB_reset:
 536              	.LFB147:
 169:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 170:tmk_core/protocol/arm_atsam/usb/usb2422.c **** void USB_reset(void) {
 537              		.loc 1 170 22 view -0
 538              		.cfi_startproc
 539              		@ args = 0, pretend = 0, frame = 0
 540              		@ frame_needed = 0, uses_anonymous_args = 0
 171:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     DBGC(DC_USB_RESET_BEGIN);
 541              		.loc 1 171 5 view .LVU178
 170:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     DBGC(DC_USB_RESET_BEGIN);
 542              		.loc 1 170 22 is_stmt 0 view .LVU179
 543 0000 38B5     		push	{r3, r4, r5, lr}
 544              		.cfi_def_cfa_offset 16
 545              		.cfi_offset 3, -16
 546              		.cfi_offset 4, -12
 547              		.cfi_offset 5, -8
 548              		.cfi_offset 14, -4
 172:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 173:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // pulse reset for at least 1 usec
 174:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.HUB_RESET_N = 0;  // reset low
 549              		.loc 1 174 33 view .LVU180
 550 0002 0B4C     		ldr	r4, .L36
 171:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 551              		.loc 1 171 5 view .LVU181
 552 0004 0B4D     		ldr	r5, .L36+4
 553 0006 4423     		movs	r3, #68
 554 0008 2B60     		str	r3, [r5]
 555              		.loc 1 174 5 is_stmt 1 view .LVU182
 556              		.loc 1 174 33 is_stmt 0 view .LVU183
 557 000a 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 558 000c 6FF38613 		bfc	r3, #6, #1
 559 0010 6370     		strb	r3, [r4, #1]
 175:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     SR_EXP_WriteData();
 560              		.loc 1 175 5 is_stmt 1 view .LVU184
 561 0012 FFF7FEFF 		bl	SR_EXP_WriteData
 562              	.LVL15:
 176:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     wait_us(2);
 563              		.loc 1 176 5 view .LVU185
 564 0016 0220     		movs	r0, #2
 565 0018 FFF7FEFF 		bl	CLK_delay_us
 566              	.LVL16:
 177:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.HUB_RESET_N = 1;  // reset high to run
 567              		.loc 1 177 5 view .LVU186
 568              		.loc 1 177 33 is_stmt 0 view .LVU187
 569 001c 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 570 001e 43F04003 		orr	r3, r3, #64
 571 0022 6370     		strb	r3, [r4, #1]
 178:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     SR_EXP_WriteData();
 572              		.loc 1 178 5 is_stmt 1 view .LVU188
 573 0024 FFF7FEFF 		bl	SR_EXP_WriteData
 574              	.LVL17:
 179:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 180:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     DBGC(DC_USB_RESET_COMPLETE);
 575              		.loc 1 180 5 view .LVU189
 576 0028 4523     		movs	r3, #69
 577 002a 2B60     		str	r3, [r5]
 181:tmk_core/protocol/arm_atsam/usb/usb2422.c **** }
 578              		.loc 1 181 1 is_stmt 0 view .LVU190
 579 002c 38BD     		pop	{r3, r4, r5, pc}
 580              	.L37:
 581 002e 00BF     		.align	2
 582              	.L36:
 583 0030 00000000 		.word	sr_exp_data
 584 0034 00000000 		.word	debug_code
 585              		.cfi_endproc
 586              	.LFE147:
 588              		.section	.text.USB_configure,"ax",%progbits
 589              		.align	1
 590              		.global	USB_configure
 591              		.syntax unified
 592              		.thumb
 593              		.thumb_func
 594              		.fpu fpv4-sp-d16
 596              	USB_configure:
 597              	.LFB148:
 182:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 183:tmk_core/protocol/arm_atsam/usb/usb2422.c **** void USB_configure(void) {
 598              		.loc 1 183 26 is_stmt 1 view -0
 599              		.cfi_startproc
 600              		@ args = 0, pretend = 0, frame = 0
 601              		@ frame_needed = 0, uses_anonymous_args = 0
 184:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     Usb2422 *pusb2422 = &USB2422_shadow;
 602              		.loc 1 184 5 view .LVU192
 603              	.LVL18:
 185:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     memset(pusb2422, 0, sizeof(Usb2422));
 604              		.loc 1 185 5 view .LVU193
 183:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     Usb2422 *pusb2422 = &USB2422_shadow;
 605              		.loc 1 183 26 is_stmt 0 view .LVU194
 606 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 607              		.cfi_def_cfa_offset 24
 608              		.cfi_offset 3, -24
 609              		.cfi_offset 4, -20
 610              		.cfi_offset 5, -16
 611              		.cfi_offset 6, -12
 612              		.cfi_offset 7, -8
 613              		.cfi_offset 14, -4
 614              		.loc 1 185 5 view .LVU195
 615 0002 4FF48072 		mov	r2, #256
 616 0006 0021     		movs	r1, #0
 617 0008 3248     		ldr	r0, .L49
 186:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 187:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     uint16_t *serial_use    = (uint16_t *)SERNAME;                 // Default to use SERNAME from t
 188:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     uint8_t   serial_length = sizeof(SERNAME) / sizeof(uint16_t);  // Default to use SERNAME from t
 189:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #ifndef MD_BOOTLOADER
 190:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     uint32_t serial_ptrloc = (uint32_t)&_srom - 4;
 191:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #else                                                      // MD_BOOTLOADER
 192:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     uint32_t serial_ptrloc = (uint32_t)&_erom - 4;
 193:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #endif                                                     // MD_BOOTLOADER
 194:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     uint32_t serial_address = *(uint32_t *)serial_ptrloc;  // Address of bootloader's serial number
 195:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 196:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     DBGC(DC_USB_CONFIGURE_BEGIN);
 618              		.loc 1 196 5 view .LVU196
 619 000a 334D     		ldr	r5, .L49+4
 185:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 620              		.loc 1 185 5 view .LVU197
 621 000c FFF7FEFF 		bl	memset
 622              	.LVL19:
 187:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     uint8_t   serial_length = sizeof(SERNAME) / sizeof(uint16_t);  // Default to use SERNAME from t
 623              		.loc 1 187 5 is_stmt 1 view .LVU198
 188:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #ifndef MD_BOOTLOADER
 624              		.loc 1 188 5 view .LVU199
 190:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #else                                                      // MD_BOOTLOADER
 625              		.loc 1 190 5 view .LVU200
 190:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #else                                                      // MD_BOOTLOADER
 626              		.loc 1 190 14 is_stmt 0 view .LVU201
 627 0010 324B     		ldr	r3, .L49+8
 628 0012 1A1F     		subs	r2, r3, #4
 629              	.LVL20:
 194:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 630              		.loc 1 194 5 is_stmt 1 view .LVU202
 194:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 631              		.loc 1 194 14 is_stmt 0 view .LVU203
 632 0014 53F8043C 		ldr	r3, [r3, #-4]
 633              	.LVL21:
 634              		.loc 1 196 5 is_stmt 1 view .LVU204
 635 0018 4921     		movs	r1, #73
 636 001a 2960     		str	r1, [r5]
 197:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 198:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     if (serial_address != 0xFFFFFFFF && serial_address < serial_ptrloc)  // Check for factory progr
 637              		.loc 1 198 5 view .LVU205
 638              		.loc 1 198 8 is_stmt 0 view .LVU206
 639 001c 591C     		adds	r1, r3, #1
 640 001e 55D0     		beq	.L46
 641              		.loc 1 198 38 discriminator 1 view .LVU207
 642 0020 9A42     		cmp	r2, r3
 643 0022 53D9     		bls	.L46
 199:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     {
 200:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         if ((serial_address & 0xFF) % 4 == 0)  // Check alignment
 644              		.loc 1 200 9 is_stmt 1 view .LVU208
 645              		.loc 1 200 12 is_stmt 0 view .LVU209
 646 0024 13F00300 		ands	r0, r3, #3
 647 0028 50D1     		bne	.L46
 201:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         {
 202:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             serial_use    = (uint16_t *)(serial_address);
 648              		.loc 1 202 13 is_stmt 1 view .LVU210
 649              		.loc 1 202 27 is_stmt 0 view .LVU211
 650 002a 1946     		mov	r1, r3
 651              	.LVL22:
 203:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             serial_length = 0;
 652              		.loc 1 203 13 is_stmt 1 view .LVU212
 204:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             while ((*(serial_use + serial_length) > 32 && *(serial_use + serial_length) < 127) && s
 653              		.loc 1 204 13 view .LVU213
 205:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 serial_length++;
 206:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 DBGC(DC_USB_CONFIGURE_GET_SERIAL);
 654              		.loc 1 206 17 is_stmt 0 view .LVU214
 655 002c 4A26     		movs	r6, #74
 656              	.LVL23:
 657              	.L40:
 204:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             while ((*(serial_use + serial_length) > 32 && *(serial_use + serial_length) < 127) && s
 658              		.loc 1 204 56 view .LVU215
 659 002e 33F81040 		ldrh	r4, [r3, r0, lsl #1]
 204:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             while ((*(serial_use + serial_length) > 32 && *(serial_use + serial_length) < 127) && s
 660              		.loc 1 204 19 view .LVU216
 661 0032 213C     		subs	r4, r4, #33
 662 0034 5D2C     		cmp	r4, #93
 663 0036 C2B2     		uxtb	r2, r0
 664              	.LVL24:
 204:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             while ((*(serial_use + serial_length) > 32 && *(serial_use + serial_length) < 127) && s
 665              		.loc 1 204 19 view .LVU217
 666 0038 03D8     		bhi	.L39
 667 003a 0130     		adds	r0, r0, #1
 204:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             while ((*(serial_use + serial_length) > 32 && *(serial_use + serial_length) < 127) && s
 668              		.loc 1 204 96 discriminator 1 view .LVU218
 669 003c 1528     		cmp	r0, #21
 670 003e 43D1     		bne	.L41
 671 0040 1422     		movs	r2, #20
 672              	.LVL25:
 673              	.L39:
 207:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             }
 208:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         }
 209:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 210:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 211:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // configure Usb2422 registers
 212:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->VID.reg               = 0x04D8;  // from Microchip 4/19/2018
 674              		.loc 1 212 5 is_stmt 1 view .LVU219
 213:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->PID.reg               = 0xEEC5;  // from Microchip 4/19/2018 = Massdrop, Inc. USB Hub
 675              		.loc 1 213 5 view .LVU220
 214:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->DID.reg               = 0x0101;  // BCD 01.01
 676              		.loc 1 214 5 view .LVU221
 215:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->CFG1.bit.SELF_BUS_PWR = 1;       // self powered for now
 677              		.loc 1 215 5 view .LVU222
 216:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->CFG1.bit.HS_DISABLE   = 1;       // full or high speed
 678              		.loc 1 216 5 view .LVU223
 212:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->PID.reg               = 0xEEC5;  // from Microchip 4/19/2018 = Massdrop, Inc. USB Hub
 679              		.loc 1 212 37 is_stmt 0 view .LVU224
 680 0042 244C     		ldr	r4, .L49
 681 0044 4FF49B60 		mov	r0, #1240
 682 0048 2080     		strh	r0, [r4]	@ movhi
 213:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->DID.reg               = 0x0101;  // BCD 01.01
 683              		.loc 1 213 37 view .LVU225
 684 004a 4EF6C560 		movw	r0, #61125
 685 004e 6080     		strh	r0, [r4, #2]	@ movhi
 214:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->CFG1.bit.SELF_BUS_PWR = 1;       // self powered for now
 686              		.loc 1 214 37 view .LVU226
 687 0050 40F20110 		movw	r0, #257
 688 0054 A080     		strh	r0, [r4, #4]	@ movhi
 689              		.loc 1 216 37 view .LVU227
 690 0056 A079     		ldrb	r0, [r4, #6]	@ zero_extendqisi2
 217:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // pusb2422->CFG2.bit.COMPOUND = 0; // compound device
 218:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->CFG3.bit.STRING_EN = 1;  // strings enabled
 219:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // pusb2422->NRD.bit.PORT2_NR = 0; // MCU is non-removable
 220:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->MAXPB.reg = 20;  // 0mA
 221:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->HCMCB.reg = 20;  // 0mA
 222:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->MFRSL.reg = sizeof(MFRNAME) / sizeof(uint16_t);
 223:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->PRDSL.reg = sizeof(PRDNAME) / sizeof(uint16_t);
 224:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->SERSL.reg = serial_length;
 691              		.loc 1 224 25 view .LVU228
 692 0058 6275     		strb	r2, [r4, #21]
 216:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // pusb2422->CFG2.bit.COMPOUND = 0; // compound device
 693              		.loc 1 216 37 view .LVU229
 694 005a 60F05F00 		orn	r0, r0, #95
 695 005e A071     		strb	r0, [r4, #6]
 218:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // pusb2422->NRD.bit.PORT2_NR = 0; // MCU is non-removable
 696              		.loc 1 218 5 is_stmt 1 view .LVU230
 218:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // pusb2422->NRD.bit.PORT2_NR = 0; // MCU is non-removable
 697              		.loc 1 218 34 is_stmt 0 view .LVU231
 698 0060 207A     		ldrb	r0, [r4, #8]	@ zero_extendqisi2
 699 0062 40F00100 		orr	r0, r0, #1
 700 0066 2072     		strb	r0, [r4, #8]
 220:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->HCMCB.reg = 20;  // 0mA
 701              		.loc 1 220 5 is_stmt 1 view .LVU232
 220:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->HCMCB.reg = 20;  // 0mA
 702              		.loc 1 220 25 is_stmt 0 view .LVU233
 703 0068 1420     		movs	r0, #20
 704 006a 6073     		strb	r0, [r4, #13]
 221:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->MFRSL.reg = sizeof(MFRNAME) / sizeof(uint16_t);
 705              		.loc 1 221 5 is_stmt 1 view .LVU234
 221:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->MFRSL.reg = sizeof(MFRNAME) / sizeof(uint16_t);
 706              		.loc 1 221 25 is_stmt 0 view .LVU235
 707 006c E073     		strb	r0, [r4, #15]
 222:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->PRDSL.reg = sizeof(PRDNAME) / sizeof(uint16_t);
 708              		.loc 1 222 5 is_stmt 1 view .LVU236
 222:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->PRDSL.reg = sizeof(PRDNAME) / sizeof(uint16_t);
 709              		.loc 1 222 25 is_stmt 0 view .LVU237
 710 006e 0D20     		movs	r0, #13
 711 0070 E074     		strb	r0, [r4, #19]
 223:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->SERSL.reg = serial_length;
 712              		.loc 1 223 5 is_stmt 1 view .LVU238
 223:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->SERSL.reg = serial_length;
 713              		.loc 1 223 25 is_stmt 0 view .LVU239
 714 0072 0C20     		movs	r0, #12
 715 0074 2075     		strb	r0, [r4, #20]
 716              		.loc 1 224 5 is_stmt 1 view .LVU240
 225:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     memcpy(pusb2422->MFRSTR, MFRNAME, sizeof(MFRNAME));
 717              		.loc 1 225 5 view .LVU241
 718 0076 1A48     		ldr	r0, .L49+12
 719 0078 04F11606 		add	r6, r4, #22
 720 007c 00F11807 		add	r7, r0, #24
 721              	.LVL26:
 722              	.L42:
 723              		.loc 1 225 5 is_stmt 0 view .LVU242
 724 0080 50F8043B 		ldr	r3, [r0], #4	@ unaligned
 725 0084 46F8043B 		str	r3, [r6], #4	@ unaligned
 726 0088 B842     		cmp	r0, r7
 727 008a F9D1     		bne	.L42
 728 008c 0388     		ldrh	r3, [r0]	@ unaligned
 729 008e 3380     		strh	r3, [r6]	@ unaligned
 226:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     memcpy(pusb2422->PRDSTR, PRDNAME, sizeof(PRDNAME));
 730              		.loc 1 226 5 is_stmt 1 view .LVU243
 731 0090 144B     		ldr	r3, .L49+16
 732 0092 1548     		ldr	r0, .L49+20
 733 0094 03F11806 		add	r6, r3, #24
 734              	.L43:
 735 0098 53F8047B 		ldr	r7, [r3], #4	@ unaligned
 736 009c 40F8047B 		str	r7, [r0], #4	@ unaligned
 737 00a0 B342     		cmp	r3, r6
 738 00a2 F9D1     		bne	.L43
 227:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     memcpy(pusb2422->SERSTR, serial_use, serial_length * sizeof(uint16_t));
 739              		.loc 1 227 5 view .LVU244
 740 00a4 5200     		lsls	r2, r2, #1
 741              	.LVL27:
 742              		.loc 1 227 5 is_stmt 0 view .LVU245
 743 00a6 1148     		ldr	r0, .L49+24
 744 00a8 FFF7FEFF 		bl	memcpy
 745              	.LVL28:
 228:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // pusb2422->BOOSTUP.bit.BOOST=3;    //upstream port
 229:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // pusb2422->BOOSTDOWN.bit.BOOST1=0; // extra port
 230:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // pusb2422->BOOSTDOWN.bit.BOOST2=2; //MCU is close
 231:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     pusb2422->STCD.bit.USB_ATTACH = 1;
 746              		.loc 1 231 5 is_stmt 1 view .LVU246
 747              		.loc 1 231 35 is_stmt 0 view .LVU247
 748 00ac 94F8FF30 		ldrb	r3, [r4, #255]	@ zero_extendqisi2
 749 00b0 43F00103 		orr	r3, r3, #1
 750 00b4 84F8FF30 		strb	r3, [r4, #255]
 232:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     USB_write2422_block();
 751              		.loc 1 232 5 is_stmt 1 view .LVU248
 752 00b8 FFF7FEFF 		bl	USB_write2422_block
 753              	.LVL29:
 233:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 234:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     adc_extra = 0;
 754              		.loc 1 234 5 view .LVU249
 755              		.loc 1 234 15 is_stmt 0 view .LVU250
 756 00bc 0C4B     		ldr	r3, .L49+28
 757 00be 0022     		movs	r2, #0
 758 00c0 1A80     		strh	r2, [r3]	@ movhi
 235:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 236:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     DBGC(DC_USB_CONFIGURE_COMPLETE);
 759              		.loc 1 236 5 is_stmt 1 view .LVU251
 760 00c2 4B23     		movs	r3, #75
 761 00c4 2B60     		str	r3, [r5]
 237:tmk_core/protocol/arm_atsam/usb/usb2422.c **** }
 762              		.loc 1 237 1 is_stmt 0 view .LVU252
 763 00c6 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 764              	.LVL30:
 765              	.L41:
 205:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 DBGC(DC_USB_CONFIGURE_GET_SERIAL);
 766              		.loc 1 205 17 is_stmt 1 view .LVU253
 206:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             }
 767              		.loc 1 206 17 view .LVU254
 768 00c8 2E60     		str	r6, [r5]
 769 00ca B0E7     		b	.L40
 770              	.LVL31:
 771              	.L46:
 188:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #ifndef MD_BOOTLOADER
 772              		.loc 1 188 15 is_stmt 0 view .LVU255
 773 00cc 0B22     		movs	r2, #11
 774              	.LVL32:
 187:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     uint8_t   serial_length = sizeof(SERNAME) / sizeof(uint16_t);  // Default to use SERNAME from t
 775              		.loc 1 187 15 view .LVU256
 776 00ce 0949     		ldr	r1, .L49+32
 777 00d0 B7E7     		b	.L39
 778              	.L50:
 779 00d2 00BF     		.align	2
 780              	.L49:
 781 00d4 00000000 		.word	USB2422_shadow
 782 00d8 00000000 		.word	debug_code
 783 00dc 00000000 		.word	_srom
 784 00e0 16000000 		.word	.LANCHOR0+22
 785 00e4 30000000 		.word	.LANCHOR0+48
 786 00e8 54000000 		.word	USB2422_shadow+84
 787 00ec 92000000 		.word	USB2422_shadow+146
 788 00f0 00000000 		.word	adc_extra
 789 00f4 00000000 		.word	.LANCHOR0
 790              		.cfi_endproc
 791              	.LFE148:
 793              		.section	.text.USB_active,"ax",%progbits
 794              		.align	1
 795              		.global	USB_active
 796              		.syntax unified
 797              		.thumb
 798              		.thumb_func
 799              		.fpu fpv4-sp-d16
 801              	USB_active:
 802              	.LFB149:
 238:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 239:tmk_core/protocol/arm_atsam/usb/usb2422.c **** uint16_t USB_active(void) { return (PORT->Group[USB2422_HUB_ACTIVE_GROUP].IN.reg & (1 << USB2422_HU
 803              		.loc 1 239 27 is_stmt 1 view -0
 804              		.cfi_startproc
 805              		@ args = 0, pretend = 0, frame = 0
 806              		@ frame_needed = 0, uses_anonymous_args = 0
 807              		@ link register save eliminated.
 808              		.loc 1 239 29 view .LVU258
 809              		.loc 1 239 77 is_stmt 0 view .LVU259
 810 0000 024B     		ldr	r3, .L52
 811 0002 186A     		ldr	r0, [r3, #32]
 812              		.loc 1 239 1 view .LVU260
 813 0004 C0F38040 		ubfx	r0, r0, #18, #1
 814 0008 7047     		bx	lr
 815              	.L53:
 816 000a 00BF     		.align	2
 817              	.L52:
 818 000c 00800041 		.word	1090551808
 819              		.cfi_endproc
 820              	.LFE149:
 822              		.section	.text.USB_set_host_by_voltage,"ax",%progbits
 823              		.align	1
 824              		.global	USB_set_host_by_voltage
 825              		.syntax unified
 826              		.thumb
 827              		.thumb_func
 828              		.fpu fpv4-sp-d16
 830              	USB_set_host_by_voltage:
 831              	.LFB150:
 240:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 241:tmk_core/protocol/arm_atsam/usb/usb2422.c **** void USB_set_host_by_voltage(void) {
 832              		.loc 1 241 36 is_stmt 1 view -0
 833              		.cfi_startproc
 834              		@ args = 0, pretend = 0, frame = 0
 835              		@ frame_needed = 0, uses_anonymous_args = 0
 242:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // UP is upstream device (HOST)
 243:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // DN1 is downstream device (EXTRA)
 244:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // DN2 is keyboard (KEYB)
 245:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 246:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     DBGC(DC_USB_SET_HOST_BY_VOLTAGE_BEGIN);
 836              		.loc 1 246 5 view .LVU262
 241:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // UP is upstream device (HOST)
 837              		.loc 1 241 36 is_stmt 0 view .LVU263
 838 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 839              		.cfi_def_cfa_offset 32
 840              		.cfi_offset 3, -32
 841              		.cfi_offset 4, -28
 842              		.cfi_offset 5, -24
 843              		.cfi_offset 6, -20
 844              		.cfi_offset 7, -16
 845              		.cfi_offset 8, -12
 846              		.cfi_offset 9, -8
 847              		.cfi_offset 14, -4
 848              		.loc 1 246 5 view .LVU264
 849 0004 2E4D     		ldr	r5, .L60
 247:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 248:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     usb_host_port = USB_HOST_PORT_UNKNOWN;
 249:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #ifndef MD_BOOTLOADER
 250:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     usb_extra_state = USB_EXTRA_STATE_UNKNOWN;
 251:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #endif                             // MD_BOOTLOADER
 252:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.SRC_1    = 1;  // USBC-1 available for test
 253:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.SRC_2    = 1;  // USBC-2 available for test
 850              		.loc 1 253 30 view .LVU265
 851 0006 2F4C     		ldr	r4, .L60+4
 248:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #ifndef MD_BOOTLOADER
 852              		.loc 1 248 19 view .LVU266
 853 0008 2F4E     		ldr	r6, .L60+8
 250:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #endif                             // MD_BOOTLOADER
 854              		.loc 1 250 21 view .LVU267
 855 000a 304F     		ldr	r7, .L60+12
 254:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.E_UP_N   = 1;  // HOST disable
 255:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.E_DN1_N  = 1;  // EXTRA disable
 256:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.E_VBUS_1 = 0;  // USBC-1 disable full power I/O
 257:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.E_VBUS_2 = 0;  // USBC-2 disable full power I/O
 258:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 259:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     SR_EXP_WriteData();
 260:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 261:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     wait_ms(250);
 262:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 263:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while ((v_5v = adc_get(ADC_5V)) < ADC_5V_START_LEVEL) {
 856              		.loc 1 263 18 view .LVU268
 857 000c DFF8CC90 		ldr	r9, .L60+28
 246:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 858              		.loc 1 246 5 view .LVU269
 859 0010 4623     		movs	r3, #70
 860 0012 2B60     		str	r3, [r5]
 248:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #ifndef MD_BOOTLOADER
 861              		.loc 1 248 5 is_stmt 1 view .LVU270
 248:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #ifndef MD_BOOTLOADER
 862              		.loc 1 248 19 is_stmt 0 view .LVU271
 863 0014 0223     		movs	r3, #2
 864 0016 3370     		strb	r3, [r6]
 250:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #endif                             // MD_BOOTLOADER
 865              		.loc 1 250 5 is_stmt 1 view .LVU272
 250:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #endif                             // MD_BOOTLOADER
 866              		.loc 1 250 21 is_stmt 0 view .LVU273
 867 0018 3B70     		strb	r3, [r7]
 252:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.SRC_2    = 1;  // USBC-2 available for test
 868              		.loc 1 252 5 is_stmt 1 view .LVU274
 253:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.E_UP_N   = 1;  // HOST disable
 869              		.loc 1 253 5 view .LVU275
 254:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.E_DN1_N  = 1;  // EXTRA disable
 870              		.loc 1 254 5 view .LVU276
 255:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.E_VBUS_1 = 0;  // USBC-1 disable full power I/O
 871              		.loc 1 255 5 view .LVU277
 256:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.E_VBUS_2 = 0;  // USBC-2 disable full power I/O
 872              		.loc 1 256 5 view .LVU278
 257:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 873              		.loc 1 257 5 view .LVU279
 253:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.E_UP_N   = 1;  // HOST disable
 874              		.loc 1 253 30 is_stmt 0 view .LVU280
 875 001a 2388     		ldrh	r3, [r4]
 876 001c 23F4BE53 		bic	r3, r3, #6080
 877 0020 43F4A653 		orr	r3, r3, #5312
 878 0024 2380     		strh	r3, [r4]	@ movhi
 259:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 879              		.loc 1 259 5 is_stmt 1 view .LVU281
 880 0026 FFF7FEFF 		bl	SR_EXP_WriteData
 881              	.LVL33:
 261:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 882              		.loc 1 261 5 view .LVU282
 883 002a FA20     		movs	r0, #250
 884 002c 0021     		movs	r1, #0
 885 002e FFF7FEFF 		bl	CLK_delay_ms
 886              	.LVL34:
 887              		.loc 1 263 5 view .LVU283
 888              		.loc 1 263 11 is_stmt 0 view .LVU284
 889 0032 40F63C18 		movw	r8, #2364
 890              	.L55:
 891              		.loc 1 263 20 view .LVU285
 892 0036 0C20     		movs	r0, #12
 893 0038 FFF7FEFF 		bl	adc_get
 894              	.LVL35:
 895              		.loc 1 263 11 view .LVU286
 896 003c 4045     		cmp	r0, r8
 897              		.loc 1 263 18 view .LVU287
 898 003e A9F80000 		strh	r0, [r9]	@ movhi
 899              		.loc 1 263 11 view .LVU288
 900 0042 2DD9     		bls	.L56
 264:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         DBGC(DC_USB_SET_HOST_5V_LOW_WAITING);
 265:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 266:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 267:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     v_con_1 = adc_get(ADC_CON1);
 901              		.loc 1 267 5 is_stmt 1 view .LVU289
 902              		.loc 1 267 15 is_stmt 0 view .LVU290
 903 0044 0E20     		movs	r0, #14
 904 0046 FFF7FEFF 		bl	adc_get
 905              	.LVL36:
 906              		.loc 1 267 13 view .LVU291
 907 004a DFF89480 		ldr	r8, .L60+32
 908 004e A8F80000 		strh	r0, [r8]	@ movhi
 268:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     v_con_2 = adc_get(ADC_CON2);
 909              		.loc 1 268 5 is_stmt 1 view .LVU292
 910              		.loc 1 268 15 is_stmt 0 view .LVU293
 911 0052 0D20     		movs	r0, #13
 912 0054 FFF7FEFF 		bl	adc_get
 913              	.LVL37:
 914              		.loc 1 268 13 view .LVU294
 915 0058 1D4B     		ldr	r3, .L60+16
 269:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 270:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     v_con_1_boot = v_con_1;
 916              		.loc 1 270 18 view .LVU295
 917 005a 1E4A     		ldr	r2, .L60+20
 268:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     v_con_2 = adc_get(ADC_CON2);
 918              		.loc 1 268 13 view .LVU296
 919 005c 1880     		strh	r0, [r3]	@ movhi
 920              		.loc 1 270 5 is_stmt 1 view .LVU297
 921              		.loc 1 270 18 is_stmt 0 view .LVU298
 922 005e B8F80030 		ldrh	r3, [r8]
 923 0062 1380     		strh	r3, [r2]	@ movhi
 271:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     v_con_2_boot = v_con_2;
 924              		.loc 1 271 5 is_stmt 1 view .LVU299
 272:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 273:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     if (v_con_1 > v_con_2) {
 925              		.loc 1 273 8 is_stmt 0 view .LVU300
 926 0064 9842     		cmp	r0, r3
 271:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     v_con_2_boot = v_con_2;
 927              		.loc 1 271 18 view .LVU301
 928 0066 1C4A     		ldr	r2, .L60+24
 274:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.S_UP  = 0;  // HOST to USBC-1
 275:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.S_DN1 = 1;  // EXTRA to USBC-2
 276:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.SRC_1 = 1;  // HOST on USBC-1
 277:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.SRC_2 = 0;  // EXTRA available on USBC-2
 929              		.loc 1 277 31 view .LVU302
 930 0068 2388     		ldrh	r3, [r4]
 271:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 931              		.loc 1 271 18 view .LVU303
 932 006a 1080     		strh	r0, [r2]	@ movhi
 273:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.S_UP  = 0;  // HOST to USBC-1
 933              		.loc 1 273 5 is_stmt 1 view .LVU304
 934              		.loc 1 277 31 is_stmt 0 view .LVU305
 935 006c 23F42F53 		bic	r3, r3, #11200
 273:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.S_UP  = 0;  // HOST to USBC-1
 936              		.loc 1 273 8 view .LVU306
 937 0070 19D2     		bcs	.L57
 274:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.S_UP  = 0;  // HOST to USBC-1
 938              		.loc 1 274 9 is_stmt 1 view .LVU307
 275:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.SRC_1 = 1;  // HOST on USBC-1
 939              		.loc 1 275 9 view .LVU308
 276:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.SRC_2 = 0;  // EXTRA available on USBC-2
 940              		.loc 1 276 9 view .LVU309
 941              		.loc 1 277 9 view .LVU310
 278:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 279:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.E_VBUS_1 = 1;  // USBC-1 enable full power I/O
 942              		.loc 1 279 9 view .LVU311
 280:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.E_VBUS_2 = 0;  // USBC-2 disable full power I/O
 943              		.loc 1 280 9 view .LVU312
 277:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 944              		.loc 1 277 31 is_stmt 0 view .LVU313
 945 0072 43F42863 		orr	r3, r3, #2688
 946 0076 2380     		strh	r3, [r4]	@ movhi
 281:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 282:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         SR_EXP_WriteData();
 947              		.loc 1 282 9 is_stmt 1 view .LVU314
 948 0078 FFF7FEFF 		bl	SR_EXP_WriteData
 949              	.LVL38:
 283:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 284:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.E_UP_N = 0;  // HOST enable
 950              		.loc 1 284 9 view .LVU315
 951              		.loc 1 284 32 is_stmt 0 view .LVU316
 952 007c 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 953 007e 6FF30413 		bfc	r3, #4, #1
 954 0082 6370     		strb	r3, [r4, #1]
 285:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 286:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         SR_EXP_WriteData();
 955              		.loc 1 286 9 is_stmt 1 view .LVU317
 956 0084 FFF7FEFF 		bl	SR_EXP_WriteData
 957              	.LVL39:
 287:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 288:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         usb_host_port = USB_HOST_PORT_1;
 958              		.loc 1 288 9 view .LVU318
 959              		.loc 1 288 23 is_stmt 0 view .LVU319
 960 0088 0023     		movs	r3, #0
 961              	.L59:
 289:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     } else {
 290:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.S_UP  = 1;  // EXTRA to USBC-1
 291:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.S_DN1 = 0;  // HOST to USBC-2
 292:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.SRC_1 = 0;  // EXTRA available on USBC-1
 293:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.SRC_2 = 1;  // HOST on USBC-2
 294:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 295:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.E_VBUS_1 = 0;  // USBC-1 disable full power I/O
 296:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.E_VBUS_2 = 1;  // USBC-2 enable full power I/O
 297:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 298:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         SR_EXP_WriteData();
 299:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 300:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.E_UP_N = 0;  // HOST enable
 301:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 302:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         SR_EXP_WriteData();
 303:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 304:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         usb_host_port = USB_HOST_PORT_2;
 962              		.loc 1 304 23 view .LVU320
 963 008a 3370     		strb	r3, [r6]
 305:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 306:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 307:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #ifndef MD_BOOTLOADER
 308:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     usb_extra_state = USB_EXTRA_STATE_DISABLED;
 964              		.loc 1 308 5 is_stmt 1 view .LVU321
 965              		.loc 1 308 21 is_stmt 0 view .LVU322
 966 008c 0023     		movs	r3, #0
 967 008e 3B70     		strb	r3, [r7]
 309:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #endif  // MD_BOOTLOADER
 310:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 311:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     USB_reset();
 968              		.loc 1 311 5 is_stmt 1 view .LVU323
 969 0090 FFF7FEFF 		bl	USB_reset
 970              	.LVL40:
 312:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     USB_configure();
 971              		.loc 1 312 5 view .LVU324
 972 0094 FFF7FEFF 		bl	USB_configure
 973              	.LVL41:
 313:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 314:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     DBGC(DC_USB_SET_HOST_BY_VOLTAGE_COMPLETE);
 974              		.loc 1 314 5 view .LVU325
 975 0098 4823     		movs	r3, #72
 976 009a 2B60     		str	r3, [r5]
 315:tmk_core/protocol/arm_atsam/usb/usb2422.c **** }
 977              		.loc 1 315 1 is_stmt 0 view .LVU326
 978 009c BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 979              	.L56:
 264:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 980              		.loc 1 264 9 is_stmt 1 view .LVU327
 981 00a0 4723     		movs	r3, #71
 982 00a2 2B60     		str	r3, [r5]
 983 00a4 C7E7     		b	.L55
 984              	.L57:
 290:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.S_DN1 = 0;  // HOST to USBC-2
 985              		.loc 1 290 9 view .LVU328
 291:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.SRC_1 = 0;  // EXTRA available on USBC-1
 986              		.loc 1 291 9 view .LVU329
 292:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.SRC_2 = 1;  // HOST on USBC-2
 987              		.loc 1 292 9 view .LVU330
 293:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 988              		.loc 1 293 9 view .LVU331
 295:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.E_VBUS_2 = 1;  // USBC-2 enable full power I/O
 989              		.loc 1 295 9 view .LVU332
 296:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 990              		.loc 1 296 9 view .LVU333
 293:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 991              		.loc 1 293 31 is_stmt 0 view .LVU334
 992 00a6 43F40553 		orr	r3, r3, #8512
 993 00aa 2380     		strh	r3, [r4]	@ movhi
 298:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 994              		.loc 1 298 9 is_stmt 1 view .LVU335
 995 00ac FFF7FEFF 		bl	SR_EXP_WriteData
 996              	.LVL42:
 300:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 997              		.loc 1 300 9 view .LVU336
 300:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 998              		.loc 1 300 32 is_stmt 0 view .LVU337
 999 00b0 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1000 00b2 6FF30413 		bfc	r3, #4, #1
 1001 00b6 6370     		strb	r3, [r4, #1]
 302:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1002              		.loc 1 302 9 is_stmt 1 view .LVU338
 1003 00b8 FFF7FEFF 		bl	SR_EXP_WriteData
 1004              	.LVL43:
 304:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 1005              		.loc 1 304 9 view .LVU339
 304:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 1006              		.loc 1 304 23 is_stmt 0 view .LVU340
 1007 00bc 0123     		movs	r3, #1
 1008 00be E4E7     		b	.L59
 1009              	.L61:
 1010              		.align	2
 1011              	.L60:
 1012 00c0 00000000 		.word	debug_code
 1013 00c4 00000000 		.word	sr_exp_data
 1014 00c8 00000000 		.word	usb_host_port
 1015 00cc 00000000 		.word	usb_extra_state
 1016 00d0 00000000 		.word	v_con_2
 1017 00d4 00000000 		.word	v_con_1_boot
 1018 00d8 00000000 		.word	v_con_2_boot
 1019 00dc 00000000 		.word	v_5v
 1020 00e0 00000000 		.word	v_con_1
 1021              		.cfi_endproc
 1022              	.LFE150:
 1024              		.global	__aeabi_uldivmod
 1025              		.section	.text.USB2422_Port_Detect_Init,"ax",%progbits
 1026              		.align	1
 1027              		.global	USB2422_Port_Detect_Init
 1028              		.syntax unified
 1029              		.thumb
 1030              		.thumb_func
 1031              		.fpu fpv4-sp-d16
 1033              	USB2422_Port_Detect_Init:
 1034              	.LFB151:
 316:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 317:tmk_core/protocol/arm_atsam/usb/usb2422.c **** uint8_t USB2422_Port_Detect_Init(void) {
 1035              		.loc 1 317 40 is_stmt 1 view -0
 1036              		.cfi_startproc
 1037              		@ args = 0, pretend = 0, frame = 0
 1038              		@ frame_needed = 0, uses_anonymous_args = 0
 318:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     uint32_t port_detect_retry_ms;
 1039              		.loc 1 318 5 view .LVU342
 319:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     uint32_t tmod;
 1040              		.loc 1 319 5 view .LVU343
 320:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 321:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     DBGC(DC_PORT_DETECT_INIT_BEGIN);
 1041              		.loc 1 321 5 view .LVU344
 317:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     uint32_t port_detect_retry_ms;
 1042              		.loc 1 317 40 is_stmt 0 view .LVU345
 1043 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1044              		.cfi_def_cfa_offset 24
 1045              		.cfi_offset 4, -24
 1046              		.cfi_offset 5, -20
 1047              		.cfi_offset 6, -16
 1048              		.cfi_offset 7, -12
 1049              		.cfi_offset 8, -8
 1050              		.cfi_offset 14, -4
 1051              		.loc 1 321 5 view .LVU346
 1052 0004 204C     		ldr	r4, .L75
 322:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 323:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     USB_set_host_by_voltage();
 324:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 325:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     port_detect_retry_ms = timer_read64() + PORT_DETECT_RETRY_INTERVAL;
 326:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 327:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     while (!USB_active()) {
 328:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         tmod = timer_read64() % PORT_DETECT_RETRY_INTERVAL;
 329:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 330:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         if (v_con_1 > v_con_2)  // Values updated from USB_set_host_by_voltage();
 1053              		.loc 1 330 21 view .LVU347
 1054 0006 214F     		ldr	r7, .L75+4
 1055 0008 DFF88880 		ldr	r8, .L75+12
 1056 000c 204D     		ldr	r5, .L75+8
 321:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1057              		.loc 1 321 5 view .LVU348
 1058 000e 4123     		movs	r3, #65
 1059 0010 2360     		str	r3, [r4]
 323:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1060              		.loc 1 323 5 is_stmt 1 view .LVU349
 1061 0012 FFF7FEFF 		bl	USB_set_host_by_voltage
 1062              	.LVL44:
 325:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1063              		.loc 1 325 5 view .LVU350
 325:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1064              		.loc 1 325 28 is_stmt 0 view .LVU351
 1065 0016 FFF7FEFF 		bl	timer_read64
 1066              	.LVL45:
 325:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1067              		.loc 1 325 26 view .LVU352
 1068 001a 00F5FA66 		add	r6, r0, #2000
 1069              	.LVL46:
 327:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         tmod = timer_read64() % PORT_DETECT_RETRY_INTERVAL;
 1070              		.loc 1 327 5 is_stmt 1 view .LVU353
 1071              	.L63:
 327:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         tmod = timer_read64() % PORT_DETECT_RETRY_INTERVAL;
 1072              		.loc 1 327 13 is_stmt 0 view .LVU354
 1073 001e FFF7FEFF 		bl	USB_active
 1074              	.LVL47:
 327:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         tmod = timer_read64() % PORT_DETECT_RETRY_INTERVAL;
 1075              		.loc 1 327 11 view .LVU355
 1076 0022 18B1     		cbz	r0, .L70
 331:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         {
 332:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             // 1 flash for port 1 detected
 333:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             if (tmod > 500 && tmod < 600) {
 334:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 DBG_LED_ON;
 335:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             } else {
 336:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 DBG_LED_OFF;
 337:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             }
 338:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         } else if (v_con_2 > v_con_1)  // Values updated from USB_set_host_by_voltage();
 339:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         {
 340:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             // 2 flash for port 2 detected
 341:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             if (tmod > 500 && tmod < 600) {
 342:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 DBG_LED_ON;
 343:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             } else if (tmod > 700 && tmod < 800) {
 344:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 DBG_LED_ON;
 345:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             } else {
 346:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 DBG_LED_OFF;
 347:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             }
 348:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         }
 349:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 350:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         if (timer_read64() > port_detect_retry_ms) {
 351:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             DBGC(DC_PORT_DETECT_INIT_FAILED);
 352:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             return 0;
 353:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         }
 354:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 355:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 356:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     DBGC(DC_PORT_DETECT_INIT_COMPLETE);
 1077              		.loc 1 356 5 is_stmt 1 view .LVU356
 1078 0024 4323     		movs	r3, #67
 1079 0026 2360     		str	r3, [r4]
 357:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 358:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     return 1;
 1080              		.loc 1 358 5 view .LVU357
 1081              		.loc 1 358 12 is_stmt 0 view .LVU358
 1082 0028 0120     		movs	r0, #1
 1083 002a 27E0     		b	.L69
 1084              	.L70:
 328:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1085              		.loc 1 328 9 is_stmt 1 view .LVU359
 328:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1086              		.loc 1 328 16 is_stmt 0 view .LVU360
 1087 002c FFF7FEFF 		bl	timer_read64
 1088              	.LVL48:
 328:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1089              		.loc 1 328 31 view .LVU361
 1090 0030 4FF4FA62 		mov	r2, #2000
 1091 0034 0023     		movs	r3, #0
 1092 0036 FFF7FEFF 		bl	__aeabi_uldivmod
 1093              	.LVL49:
 330:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         {
 1094              		.loc 1 330 9 is_stmt 1 view .LVU362
 330:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         {
 1095              		.loc 1 330 21 is_stmt 0 view .LVU363
 1096 003a 3988     		ldrh	r1, [r7]
 1097 003c B8F80030 		ldrh	r3, [r8]
 330:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         {
 1098              		.loc 1 330 12 view .LVU364
 1099 0040 9942     		cmp	r1, r3
 1100 0042 08D9     		bls	.L64
 333:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 DBG_LED_ON;
 1101              		.loc 1 333 13 is_stmt 1 view .LVU365
 333:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 DBG_LED_ON;
 1102              		.loc 1 333 28 is_stmt 0 view .LVU366
 1103 0044 6FF4FA70 		mvn	r0, #500
 1104 0048 0244     		add	r2, r2, r0
 1105              	.LVL50:
 1106              	.L74:
 343:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 DBG_LED_ON;
 1107              		.loc 1 343 23 view .LVU367
 1108 004a 622A     		cmp	r2, #98
 1109 004c 4FF00063 		mov	r3, #134217728
 1110 0050 09D9     		bls	.L72
 346:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             }
 1111              		.loc 1 346 17 is_stmt 1 view .LVU368
 1112 0052 6B61     		str	r3, [r5, #20]
 1113 0054 08E0     		b	.L66
 1114              	.LVL51:
 1115              	.L64:
 338:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         {
 1116              		.loc 1 338 16 view .LVU369
 338:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         {
 1117              		.loc 1 338 19 is_stmt 0 view .LVU370
 1118 0056 07D2     		bcs	.L66
 341:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 DBG_LED_ON;
 1119              		.loc 1 341 13 is_stmt 1 view .LVU371
 341:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 DBG_LED_ON;
 1120              		.loc 1 341 28 is_stmt 0 view .LVU372
 1121 0058 6FF4FA71 		mvn	r1, #500
 1122 005c 5318     		adds	r3, r2, r1
 341:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 DBG_LED_ON;
 1123              		.loc 1 341 16 view .LVU373
 1124 005e 622B     		cmp	r3, #98
 1125 0060 0ED8     		bhi	.L67
 342:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             } else if (tmod > 700 && tmod < 800) {
 1126              		.loc 1 342 17 is_stmt 1 view .LVU374
 1127 0062 4FF00063 		mov	r3, #134217728
 1128              	.LVL52:
 1129              	.L72:
 342:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             } else if (tmod > 700 && tmod < 800) {
 1130              		.loc 1 342 17 is_stmt 0 view .LVU375
 1131 0066 AB61     		str	r3, [r5, #24]
 1132              	.L66:
 350:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             DBGC(DC_PORT_DETECT_INIT_FAILED);
 1133              		.loc 1 350 9 is_stmt 1 view .LVU376
 350:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             DBGC(DC_PORT_DETECT_INIT_FAILED);
 1134              		.loc 1 350 13 is_stmt 0 view .LVU377
 1135 0068 FFF7FEFF 		bl	timer_read64
 1136              	.LVL53:
 350:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             DBGC(DC_PORT_DETECT_INIT_FAILED);
 1137              		.loc 1 350 28 view .LVU378
 1138 006c 0023     		movs	r3, #0
 350:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             DBGC(DC_PORT_DETECT_INIT_FAILED);
 1139              		.loc 1 350 12 view .LVU379
 1140 006e 8B42     		cmp	r3, r1
 1141 0070 08BF     		it	eq
 1142 0072 8642     		cmpeq	r6, r0
 1143 0074 D3D2     		bcs	.L63
 351:tmk_core/protocol/arm_atsam/usb/usb2422.c ****             return 0;
 1144              		.loc 1 351 13 is_stmt 1 view .LVU380
 1145 0076 4223     		movs	r3, #66
 1146 0078 2360     		str	r3, [r4]
 352:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         }
 1147              		.loc 1 352 13 view .LVU381
 352:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         }
 1148              		.loc 1 352 20 is_stmt 0 view .LVU382
 1149 007a 0020     		movs	r0, #0
 1150              	.L69:
 359:tmk_core/protocol/arm_atsam/usb/usb2422.c **** }
 1151              		.loc 1 359 1 view .LVU383
 1152 007c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1153              	.LVL54:
 1154              	.L67:
 343:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 DBG_LED_ON;
 1155              		.loc 1 343 20 is_stmt 1 view .LVU384
 343:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 DBG_LED_ON;
 1156              		.loc 1 343 35 is_stmt 0 view .LVU385
 1157 0080 6FF42F73 		mvn	r3, #700
 1158 0084 1A44     		add	r2, r2, r3
 1159              	.LVL55:
 343:tmk_core/protocol/arm_atsam/usb/usb2422.c ****                 DBG_LED_ON;
 1160              		.loc 1 343 35 view .LVU386
 1161 0086 E0E7     		b	.L74
 1162              	.L76:
 1163              		.align	2
 1164              	.L75:
 1165 0088 00000000 		.word	debug_code
 1166 008c 00000000 		.word	v_con_1
 1167 0090 00800041 		.word	1090551808
 1168 0094 00000000 		.word	v_con_2
 1169              		.cfi_endproc
 1170              	.LFE151:
 1172              		.section	.text.USB_ExtraSetState,"ax",%progbits
 1173              		.align	1
 1174              		.global	USB_ExtraSetState
 1175              		.syntax unified
 1176              		.thumb
 1177              		.thumb_func
 1178              		.fpu fpv4-sp-d16
 1180              	USB_ExtraSetState:
 1181              	.LVL56:
 1182              	.LFB152:
 360:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 361:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #ifndef MD_BOOTLOADER
 362:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 363:tmk_core/protocol/arm_atsam/usb/usb2422.c **** void USB_ExtraSetState(uint8_t state) {
 1183              		.loc 1 363 39 is_stmt 1 view -0
 1184              		.cfi_startproc
 1185              		@ args = 0, pretend = 0, frame = 0
 1186              		@ frame_needed = 0, uses_anonymous_args = 0
 364:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     uint8_t state_save = state;
 1187              		.loc 1 364 5 view .LVU388
 365:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 366:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     if (state == USB_EXTRA_STATE_DISABLED_UNTIL_REPLUG) state = USB_EXTRA_STATE_DISABLED;
 1188              		.loc 1 366 5 view .LVU389
 363:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     uint8_t state_save = state;
 1189              		.loc 1 363 39 is_stmt 0 view .LVU390
 1190 0000 10B5     		push	{r4, lr}
 1191              		.cfi_def_cfa_offset 8
 1192              		.cfi_offset 4, -8
 1193              		.cfi_offset 14, -4
 367:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 368:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     if (usb_host_port == USB_HOST_PORT_1)
 1194              		.loc 1 368 23 view .LVU391
 1195 0002 184A     		ldr	r2, .L88
 1196 0004 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 366:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1197              		.loc 1 366 8 view .LVU392
 1198 0006 0328     		cmp	r0, #3
 363:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     uint8_t state_save = state;
 1199              		.loc 1 363 39 view .LVU393
 1200 0008 0446     		mov	r4, r0
 366:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1201              		.loc 1 366 63 view .LVU394
 1202 000a 14BF     		ite	ne
 1203 000c 0346     		movne	r3, r0
 1204 000e 0023     		moveq	r3, #0
 1205              	.LVL57:
 1206              		.loc 1 368 5 is_stmt 1 view .LVU395
 1207              		.loc 1 368 8 is_stmt 0 view .LVU396
 1208 0010 BAB9     		cbnz	r2, .L79
 369:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.E_VBUS_2 = state;
 1209              		.loc 1 369 9 is_stmt 1 view .LVU397
 1210              		.loc 1 369 34 is_stmt 0 view .LVU398
 1211 0012 154A     		ldr	r2, .L88+4
 1212 0014 5178     		ldrb	r1, [r2, #1]	@ zero_extendqisi2
 1213 0016 63F30001 		bfi	r1, r3, #0, #1
 1214              	.L86:
 370:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     else if (usb_host_port == USB_HOST_PORT_2)
 371:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.E_VBUS_1 = state;
 1215              		.loc 1 371 34 view .LVU399
 1216 001a 5170     		strb	r1, [r2, #1]
 372:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     else
 373:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         return;
 374:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 375:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     sr_exp_data.bit.E_DN1_N = !state;
 1217              		.loc 1 375 5 is_stmt 1 view .LVU400
 1218              		.loc 1 375 29 is_stmt 0 view .LVU401
 1219 001c 124A     		ldr	r2, .L88+4
 1220              		.loc 1 375 31 view .LVU402
 1221 001e B3FA83F3 		clz	r3, r3
 1222              	.LVL58:
 1223              		.loc 1 375 29 view .LVU403
 1224 0022 5178     		ldrb	r1, [r2, #1]	@ zero_extendqisi2
 1225              		.loc 1 375 31 view .LVU404
 1226 0024 5B09     		lsrs	r3, r3, #5
 1227              		.loc 1 375 29 view .LVU405
 1228 0026 63F38201 		bfi	r1, r3, #2, #1
 1229 002a 5170     		strb	r1, [r2, #1]
 376:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     SR_EXP_WriteData();
 1230              		.loc 1 376 5 is_stmt 1 view .LVU406
 1231 002c FFF7FEFF 		bl	SR_EXP_WriteData
 1232              	.LVL59:
 377:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 378:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     usb_extra_state = state_save;
 1233              		.loc 1 378 5 view .LVU407
 1234              		.loc 1 378 21 is_stmt 0 view .LVU408
 1235 0030 0E4B     		ldr	r3, .L88+8
 379:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 380:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     if (usb_extra_state == USB_EXTRA_STATE_ENABLED)
 1236              		.loc 1 380 8 view .LVU409
 1237 0032 012C     		cmp	r4, #1
 378:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1238              		.loc 1 378 21 view .LVU410
 1239 0034 1C70     		strb	r4, [r3]
 1240              		.loc 1 380 5 is_stmt 1 view .LVU411
 1241              		.loc 1 380 8 is_stmt 0 view .LVU412
 1242 0036 0BD1     		bne	.L82
 381:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         CDC_print("USB: Extra enabled\r\n");
 1243              		.loc 1 381 9 is_stmt 1 view .LVU413
 1244 0038 0D48     		ldr	r0, .L88+12
 1245              	.L87:
 382:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     else if (usb_extra_state == USB_EXTRA_STATE_DISABLED) {
 383:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         CDC_print("USB: Extra disabled\r\n");
 384:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #    ifdef USE_MASSDROP_CONFIGURATOR
 385:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         if (led_animation_breathing) gcr_breathe = gcr_desired;
 386:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #    endif
 387:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     } else if (usb_extra_state == USB_EXTRA_STATE_DISABLED_UNTIL_REPLUG)
 388:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         CDC_print("USB: Extra disabled until replug\r\n");
 389:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     else
 390:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         CDC_print("USB: Extra state unknown\r\n");
 391:tmk_core/protocol/arm_atsam/usb/usb2422.c **** }
 1246              		.loc 1 391 1 is_stmt 0 view .LVU414
 1247 003a BDE81040 		pop	{r4, lr}
 1248              		.cfi_remember_state
 1249              		.cfi_restore 14
 1250              		.cfi_restore 4
 1251              		.cfi_def_cfa_offset 0
 390:tmk_core/protocol/arm_atsam/usb/usb2422.c **** }
 1252              		.loc 1 390 9 view .LVU415
 1253 003e FFF7FEBF 		b	CDC_print
 1254              	.LVL60:
 1255              	.L79:
 1256              		.cfi_restore_state
 370:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.E_VBUS_1 = state;
 1257              		.loc 1 370 10 is_stmt 1 view .LVU416
 370:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         sr_exp_data.bit.E_VBUS_1 = state;
 1258              		.loc 1 370 13 is_stmt 0 view .LVU417
 1259 0042 012A     		cmp	r2, #1
 1260 0044 0CD1     		bne	.L77
 371:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     else
 1261              		.loc 1 371 9 is_stmt 1 view .LVU418
 371:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     else
 1262              		.loc 1 371 34 is_stmt 0 view .LVU419
 1263 0046 084A     		ldr	r2, .L88+4
 1264 0048 5178     		ldrb	r1, [r2, #1]	@ zero_extendqisi2
 1265 004a 63F34101 		bfi	r1, r3, #1, #1
 1266 004e E4E7     		b	.L86
 1267              	.LVL61:
 1268              	.L82:
 382:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         CDC_print("USB: Extra disabled\r\n");
 1269              		.loc 1 382 10 is_stmt 1 view .LVU420
 382:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         CDC_print("USB: Extra disabled\r\n");
 1270              		.loc 1 382 13 is_stmt 0 view .LVU421
 1271 0050 0CB9     		cbnz	r4, .L83
 383:tmk_core/protocol/arm_atsam/usb/usb2422.c **** #    ifdef USE_MASSDROP_CONFIGURATOR
 1272              		.loc 1 383 9 is_stmt 1 view .LVU422
 1273 0052 0848     		ldr	r0, .L88+16
 1274 0054 F1E7     		b	.L87
 1275              	.L83:
 387:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         CDC_print("USB: Extra disabled until replug\r\n");
 1276              		.loc 1 387 12 view .LVU423
 387:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         CDC_print("USB: Extra disabled until replug\r\n");
 1277              		.loc 1 387 15 is_stmt 0 view .LVU424
 1278 0056 032C     		cmp	r4, #3
 388:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     else
 1279              		.loc 1 388 9 is_stmt 1 view .LVU425
 1280 0058 0CBF     		ite	eq
 1281 005a 0748     		ldreq	r0, .L88+20
 390:tmk_core/protocol/arm_atsam/usb/usb2422.c **** }
 1282              		.loc 1 390 9 view .LVU426
 1283 005c 0748     		ldrne	r0, .L88+24
 1284 005e ECE7     		b	.L87
 1285              	.LVL62:
 1286              	.L77:
 1287              		.loc 1 391 1 is_stmt 0 view .LVU427
 1288 0060 10BD     		pop	{r4, pc}
 1289              	.L89:
 1290 0062 00BF     		.align	2
 1291              	.L88:
 1292 0064 00000000 		.word	usb_host_port
 1293 0068 00000000 		.word	sr_exp_data
 1294 006c 00000000 		.word	usb_extra_state
 1295 0070 00000000 		.word	.LC0
 1296 0074 15000000 		.word	.LC1
 1297 0078 2B000000 		.word	.LC2
 1298 007c 4E000000 		.word	.LC3
 1299              		.cfi_endproc
 1300              	.LFE152:
 1302              		.global	__aeabi_i2d
 1303              		.global	__aeabi_dmul
 1304              		.global	__aeabi_dadd
 1305              		.global	__aeabi_d2uiz
 1306              		.section	.text.USB_HandleExtraDevice,"ax",%progbits
 1307              		.align	1
 1308              		.global	USB_HandleExtraDevice
 1309              		.syntax unified
 1310              		.thumb
 1311              		.thumb_func
 1312              		.fpu fpv4-sp-d16
 1314              	USB_HandleExtraDevice:
 1315              	.LFB153:
 392:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 393:tmk_core/protocol/arm_atsam/usb/usb2422.c **** void USB_HandleExtraDevice(void) {
 1316              		.loc 1 393 34 is_stmt 1 view -0
 1317              		.cfi_startproc
 1318              		@ args = 0, pretend = 0, frame = 0
 1319              		@ frame_needed = 0, uses_anonymous_args = 0
 394:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     uint16_t adcval;
 1320              		.loc 1 394 5 view .LVU429
 395:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 396:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     if (usb_host_port == USB_HOST_PORT_1)
 1321              		.loc 1 396 5 view .LVU430
 393:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     uint16_t adcval;
 1322              		.loc 1 393 34 is_stmt 0 view .LVU431
 1323 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1324              		.cfi_def_cfa_offset 24
 1325              		.cfi_offset 3, -24
 1326              		.cfi_offset 4, -20
 1327              		.cfi_offset 5, -16
 1328              		.cfi_offset 6, -12
 1329              		.cfi_offset 7, -8
 1330              		.cfi_offset 14, -4
 1331              		.loc 1 396 23 view .LVU432
 1332 0002 274B     		ldr	r3, .L102+16
 1333 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1334              		.loc 1 396 8 view .LVU433
 1335 0006 53BB     		cbnz	r3, .L91
 397:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         adcval = adc_get(ADC_CON2);
 1336              		.loc 1 397 9 is_stmt 1 view .LVU434
 1337              		.loc 1 397 18 is_stmt 0 view .LVU435
 1338 0008 0D20     		movs	r0, #13
 1339              	.L100:
 398:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     else if (usb_host_port == USB_HOST_PORT_2)
 399:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         adcval = adc_get(ADC_CON1);
 1340              		.loc 1 399 18 view .LVU436
 1341 000a FFF7FEFF 		bl	adc_get
 1342              	.LVL63:
 400:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     else
 401:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         return;
 402:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 403:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     adc_extra = adc_extra * 0.9 + adcval * 0.1;
 1343              		.loc 1 403 27 view .LVU437
 1344 000e 254C     		ldr	r4, .L102+20
 399:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     else
 1345              		.loc 1 399 18 view .LVU438
 1346 0010 0546     		mov	r5, r0
 1347              	.LVL64:
 1348              		.loc 1 403 5 is_stmt 1 view .LVU439
 1349              		.loc 1 403 27 is_stmt 0 view .LVU440
 1350 0012 2088     		ldrh	r0, [r4]
 1351 0014 FFF7FEFF 		bl	__aeabi_i2d
 1352              	.LVL65:
 1353 0018 1DA3     		adr	r3, .L102
 1354 001a D3E90023 		ldrd	r2, [r3]
 1355 001e FFF7FEFF 		bl	__aeabi_dmul
 1356              	.LVL66:
 1357 0022 0646     		mov	r6, r0
 1358              		.loc 1 403 42 view .LVU441
 1359 0024 2846     		mov	r0, r5
 1360              		.loc 1 403 27 view .LVU442
 1361 0026 0F46     		mov	r7, r1
 1362              		.loc 1 403 42 view .LVU443
 1363 0028 FFF7FEFF 		bl	__aeabi_i2d
 1364              	.LVL67:
 1365 002c 1AA3     		adr	r3, .L102+8
 1366 002e D3E90023 		ldrd	r2, [r3]
 1367 0032 FFF7FEFF 		bl	__aeabi_dmul
 1368              	.LVL68:
 1369              		.loc 1 403 33 view .LVU444
 1370 0036 0246     		mov	r2, r0
 1371 0038 0B46     		mov	r3, r1
 1372 003a 3046     		mov	r0, r6
 1373 003c 3946     		mov	r1, r7
 1374 003e FFF7FEFF 		bl	__aeabi_dadd
 1375              	.LVL69:
 1376              		.loc 1 403 15 view .LVU445
 1377 0042 FFF7FEFF 		bl	__aeabi_d2uiz
 1378              	.LVL70:
 404:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 405:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // Check for a forced disable state (such as overload prevention)
 406:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     if (usb_extra_state == USB_EXTRA_STATE_DISABLED_UNTIL_REPLUG) {
 1379              		.loc 1 406 25 view .LVU446
 1380 0046 1849     		ldr	r1, .L102+24
 1381 0048 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 403:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1382              		.loc 1 403 15 view .LVU447
 1383 004a 83B2     		uxth	r3, r0
 1384              		.loc 1 406 8 view .LVU448
 1385 004c 032A     		cmp	r2, #3
 403:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1386              		.loc 1 403 15 view .LVU449
 1387 004e 2380     		strh	r3, [r4]	@ movhi
 1388              		.loc 1 406 5 is_stmt 1 view .LVU450
 1389              		.loc 1 406 8 is_stmt 0 view .LVU451
 1390 0050 09D1     		bne	.L95
 407:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         // Detect unplug and reset state to disabled
 408:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         if (adc_extra > USB_EXTRA_ADC_THRESHOLD) usb_extra_state = USB_EXTRA_STATE_DISABLED;
 1391              		.loc 1 408 9 is_stmt 1 view .LVU452
 1392              		.loc 1 408 12 is_stmt 0 view .LVU453
 1393 0052 B3F5617F 		cmp	r3, #900
 1394 0056 01D9     		bls	.L90
 1395              		.loc 1 408 50 is_stmt 1 discriminator 1 view .LVU454
 1396              		.loc 1 408 66 is_stmt 0 discriminator 1 view .LVU455
 1397 0058 0023     		movs	r3, #0
 1398 005a 0B70     		strb	r3, [r1]
 1399              	.LVL71:
 1400              	.L90:
 409:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 410:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         return;  // Return even if unplug detected
 411:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 412:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 413:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     if (usb_extra_manual) {
 414:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         if (usb_extra_state == USB_EXTRA_STATE_DISABLED) USB_ExtraSetState(USB_EXTRA_STATE_ENABLED)
 415:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 416:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         return;
 417:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     }
 418:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 419:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     // dpf("a %i %i\r\n",adcval, adc_extra);
 420:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     if (usb_extra_state == USB_EXTRA_STATE_DISABLED && adc_extra < USB_EXTRA_ADC_THRESHOLD)
 421:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         USB_ExtraSetState(USB_EXTRA_STATE_ENABLED);
 422:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     else if (usb_extra_state == USB_EXTRA_STATE_ENABLED && adc_extra > USB_EXTRA_ADC_THRESHOLD)
 423:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         USB_ExtraSetState(USB_EXTRA_STATE_DISABLED);
 424:tmk_core/protocol/arm_atsam/usb/usb2422.c **** }
 1401              		.loc 1 424 1 view .LVU456
 1402 005c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1403              	.L91:
 398:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         adcval = adc_get(ADC_CON1);
 1404              		.loc 1 398 10 is_stmt 1 view .LVU457
 398:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         adcval = adc_get(ADC_CON1);
 1405              		.loc 1 398 13 is_stmt 0 view .LVU458
 1406 005e 012B     		cmp	r3, #1
 1407 0060 FCD1     		bne	.L90
 399:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     else
 1408              		.loc 1 399 9 is_stmt 1 view .LVU459
 399:tmk_core/protocol/arm_atsam/usb/usb2422.c ****     else
 1409              		.loc 1 399 18 is_stmt 0 view .LVU460
 1410 0062 0E20     		movs	r0, #14
 1411 0064 D1E7     		b	.L100
 1412              	.LVL72:
 1413              	.L95:
 413:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         if (usb_extra_state == USB_EXTRA_STATE_DISABLED) USB_ExtraSetState(USB_EXTRA_STATE_ENABLED)
 1414              		.loc 1 413 5 is_stmt 1 view .LVU461
 413:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         if (usb_extra_state == USB_EXTRA_STATE_DISABLED) USB_ExtraSetState(USB_EXTRA_STATE_ENABLED)
 1415              		.loc 1 413 9 is_stmt 0 view .LVU462
 1416 0066 1149     		ldr	r1, .L102+28
 413:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         if (usb_extra_state == USB_EXTRA_STATE_DISABLED) USB_ExtraSetState(USB_EXTRA_STATE_ENABLED)
 1417              		.loc 1 413 8 view .LVU463
 1418 0068 0878     		ldrb	r0, [r1]	@ zero_extendqisi2
 1419 006a 30B1     		cbz	r0, .L97
 414:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1420              		.loc 1 414 9 is_stmt 1 view .LVU464
 414:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1421              		.loc 1 414 12 is_stmt 0 view .LVU465
 1422 006c 002A     		cmp	r2, #0
 1423 006e F5D1     		bne	.L90
 1424              	.L99:
 414:tmk_core/protocol/arm_atsam/usb/usb2422.c **** 
 1425              		.loc 1 414 58 is_stmt 1 discriminator 1 view .LVU466
 1426 0070 0120     		movs	r0, #1
 1427              	.L101:
 423:tmk_core/protocol/arm_atsam/usb/usb2422.c **** }
 1428              		.loc 1 423 9 view .LVU467
 1429              		.loc 1 424 1 is_stmt 0 view .LVU468
 1430 0072 BDE8F840 		pop	{r3, r4, r5, r6, r7, lr}
 1431              		.cfi_remember_state
 1432              		.cfi_restore 14
 1433              		.cfi_restore 7
 1434              		.cfi_restore 6
 1435              		.cfi_restore 5
 1436              		.cfi_restore 4
 1437              		.cfi_restore 3
 1438              		.cfi_def_cfa_offset 0
 1439              	.LVL73:
 423:tmk_core/protocol/arm_atsam/usb/usb2422.c **** }
 1440              		.loc 1 423 9 view .LVU469
 1441 0076 FFF7FEBF 		b	USB_ExtraSetState
 1442              	.LVL74:
 1443              	.L97:
 1444              		.cfi_restore_state
 420:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         USB_ExtraSetState(USB_EXTRA_STATE_ENABLED);
 1445              		.loc 1 420 5 is_stmt 1 view .LVU470
 420:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         USB_ExtraSetState(USB_EXTRA_STATE_ENABLED);
 1446              		.loc 1 420 8 is_stmt 0 view .LVU471
 1447 007a 1AB9     		cbnz	r2, .L98
 420:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         USB_ExtraSetState(USB_EXTRA_STATE_ENABLED);
 1448              		.loc 1 420 53 discriminator 1 view .LVU472
 1449 007c B3F5617F 		cmp	r3, #900
 1450 0080 ECD2     		bcs	.L90
 1451 0082 F5E7     		b	.L99
 1452              	.L98:
 422:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         USB_ExtraSetState(USB_EXTRA_STATE_DISABLED);
 1453              		.loc 1 422 10 is_stmt 1 view .LVU473
 422:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         USB_ExtraSetState(USB_EXTRA_STATE_DISABLED);
 1454              		.loc 1 422 13 is_stmt 0 view .LVU474
 1455 0084 012A     		cmp	r2, #1
 1456 0086 E9D1     		bne	.L90
 422:tmk_core/protocol/arm_atsam/usb/usb2422.c ****         USB_ExtraSetState(USB_EXTRA_STATE_DISABLED);
 1457              		.loc 1 422 57 discriminator 1 view .LVU475
 1458 0088 B3F5617F 		cmp	r3, #900
 1459 008c E6D9     		bls	.L90
 1460 008e F0E7     		b	.L101
 1461              	.L103:
 1462              		.align	3
 1463              	.L102:
 1464 0090 CDCCCCCC 		.word	3435973837
 1465 0094 CCCCEC3F 		.word	1072483532
 1466 0098 9A999999 		.word	2576980378
 1467 009c 9999B93F 		.word	1069128089
 1468 00a0 00000000 		.word	usb_host_port
 1469 00a4 00000000 		.word	adc_extra
 1470 00a8 00000000 		.word	usb_extra_state
 1471 00ac 00000000 		.word	usb_extra_manual
 1472              		.cfi_endproc
 1473              	.LFE153:
 1475              		.comm	adc_extra,2,2
 1476              		.comm	usb_gcr_auto,1,1
 1477              		.comm	usb_extra_manual,1,1
 1478              		.comm	usb_extra_state,1,1
 1479              		.comm	usb_host_port,1,1
 1480              		.global	SERNAME
 1481              		.global	PRDNAME
 1482              		.global	MFRNAME
 1483              		.comm	i2c0_buf,34,1
 1484              		.comm	USB2422_shadow,256,2
 1485              		.comm	dmac_desc_wb,16,16
 1486              		.comm	dmac_desc,16,16
 1487              		.section	.rodata
 1488              		.align	1
 1489              		.set	.LANCHOR0,. + 0
 1492              	SERNAME:
 1493 0000 5500     		.short	85
 1494 0002 6E00     		.short	110
 1495 0004 6100     		.short	97
 1496 0006 7600     		.short	118
 1497 0008 6100     		.short	97
 1498 000a 6900     		.short	105
 1499 000c 6C00     		.short	108
 1500 000e 6100     		.short	97
 1501 0010 6200     		.short	98
 1502 0012 6C00     		.short	108
 1503 0014 6500     		.short	101
 1506              	MFRNAME:
 1507 0016 4D00     		.short	77
 1508 0018 6100     		.short	97
 1509 001a 7300     		.short	115
 1510 001c 7300     		.short	115
 1511 001e 6400     		.short	100
 1512 0020 7200     		.short	114
 1513 0022 6F00     		.short	111
 1514 0024 7000     		.short	112
 1515 0026 2000     		.short	32
 1516 0028 4900     		.short	73
 1517 002a 6E00     		.short	110
 1518 002c 6300     		.short	99
 1519 002e 2E00     		.short	46
 1522              	PRDNAME:
 1523 0030 4D00     		.short	77
 1524 0032 6100     		.short	97
 1525 0034 7300     		.short	115
 1526 0036 7300     		.short	115
 1527 0038 6400     		.short	100
 1528 003a 7200     		.short	114
 1529 003c 6F00     		.short	111
 1530 003e 7000     		.short	112
 1531 0040 2000     		.short	32
 1532 0042 4800     		.short	72
 1533 0044 7500     		.short	117
 1534 0046 6200     		.short	98
 1535              		.section	.rodata.str1.1,"aMS",%progbits,1
 1536              	.LC0:
 1537 0000 5553423A 		.ascii	"USB: Extra enabled\015\012\000"
 1537      20457874 
 1537      72612065 
 1537      6E61626C 
 1537      65640D0A 
 1538              	.LC1:
 1539 0015 5553423A 		.ascii	"USB: Extra disabled\015\012\000"
 1539      20457874 
 1539      72612064 
 1539      69736162 
 1539      6C65640D 
 1540              	.LC2:
 1541 002b 5553423A 		.ascii	"USB: Extra disabled until replug\015\012\000"
 1541      20457874 
 1541      72612064 
 1541      69736162 
 1541      6C656420 
 1542              	.LC3:
 1543 004e 5553423A 		.ascii	"USB: Extra state unknown\015\012\000"
 1543      20457874 
 1543      72612073 
 1543      74617465 
 1543      20756E6B 
 1544              		.text
 1545              	.Letext0:
 1546              		.file 2 "/usr/local/Cellar/arm-gcc-bin@8/8-2019-q3-update/arm-none-eabi/include/machine/_default_t
 1547              		.file 3 "/usr/local/Cellar/arm-gcc-bin@8/8-2019-q3-update/arm-none-eabi/include/sys/_stdint.h"
 1548              		.file 4 "lib/arm_atsam/packs/atmel/SAMD51_DFP/1.0.70/include/samd51j18a.h"
 1549              		.file 5 "lib/arm_atsam/packs/arm/cmsis/5.0.1/CMSIS/Include/core_cm4.h"
 1550              		.file 6 "lib/arm_atsam/packs/atmel/SAMD51_DFP/1.0.70/include/system_samd51.h"
 1551              		.file 7 "lib/arm_atsam/packs/atmel/SAMD51_DFP/1.0.70/include/component/dmac.h"
 1552              		.file 8 "lib/arm_atsam/packs/atmel/SAMD51_DFP/1.0.70/include/component/gclk.h"
 1553              		.file 9 "lib/arm_atsam/packs/atmel/SAMD51_DFP/1.0.70/include/component/mclk.h"
 1554              		.file 10 "lib/arm_atsam/packs/atmel/SAMD51_DFP/1.0.70/include/component/oscctrl.h"
 1555              		.file 11 "lib/arm_atsam/packs/atmel/SAMD51_DFP/1.0.70/include/component/port.h"
 1556              		.file 12 "lib/arm_atsam/packs/atmel/SAMD51_DFP/1.0.70/include/component/sercom.h"
 1557              		.file 13 "lib/arm_atsam/packs/atmel/SAMD51_DFP/1.0.70/include/component/usb.h"
 1558              		.file 14 "tmk_core/protocol/arm_atsam/md_bootloader.h"
 1559              		.file 15 "tmk_core/common/timer.h"
 1560              		.file 16 "tmk_core/protocol/arm_atsam/d51_util.h"
 1561              		.file 17 "tmk_core/protocol/arm_atsam/clks.h"
 1562              		.file 18 "tmk_core/protocol/arm_atsam/adc.h"
 1563              		.file 19 "tmk_core/protocol/arm_atsam/i2c_master.h"
 1564              		.file 20 "tmk_core/protocol/arm_atsam/spi.h"
 1565              		.file 21 "tmk_core/protocol/arm_atsam/./usb/usb2422.h"
 1566              		.file 22 "tmk_core/common/action.h"
 1567              		.file 23 "tmk_core/common/report.h"
 1568              		.file 24 "tmk_core/common/host.h"
 1569              		.file 25 "tmk_core/common/debug.h"
 1570              		.file 26 "quantum/keycode_config.h"
 1571              		.file 27 "quantum/keymap.h"
 1572              		.file 28 "quantum/color.h"
 1573              		.file 29 "quantum/rgb_matrix_types.h"
 1574              		.file 30 "quantum/rgb_matrix.h"
 1575              		.file 31 "tmk_core/common/action_layer.h"
 1576              		.file 32 "tmk_core/common/action_util.h"
 1577              		.file 33 "/usr/local/Cellar/arm-gcc-bin@8/8-2019-q3-update/lib/gcc/arm-none-eabi/8.3.1/include/std
 1578              		.file 34 "/usr/local/Cellar/arm-gcc-bin@8/8-2019-q3-update/arm-none-eabi/include/sys/_types.h"
 1579              		.file 35 "/usr/local/Cellar/arm-gcc-bin@8/8-2019-q3-update/arm-none-eabi/include/sys/reent.h"
 1580              		.file 36 "/usr/local/Cellar/arm-gcc-bin@8/8-2019-q3-update/arm-none-eabi/include/sys/lock.h"
 1581              		.file 37 "/usr/local/Cellar/arm-gcc-bin@8/8-2019-q3-update/arm-none-eabi/include/stdlib.h"
 1582              		.file 38 "quantum/quantum.h"
 1583              		.file 39 "tmk_core/protocol/arm_atsam/led_matrix.h"
 1584              		.file 40 "tmk_core/protocol/arm_atsam/./usb/compiler.h"
 1585              		.file 41 "tmk_core/protocol/arm_atsam/./usb/usb_protocol.h"
 1586              		.file 42 "tmk_core/protocol/arm_atsam/./usb/udi_device_conf.h"
 1587              		.file 43 "tmk_core/protocol/arm_atsam/./usb/udi.h"
 1588              		.file 44 "tmk_core/protocol/arm_atsam/./usb/udc_desc.h"
 1589              		.file 45 "tmk_core/protocol/arm_atsam/./usb/udi_hid_kbd.h"
 1590              		.file 46 "tmk_core/protocol/arm_atsam/./usb/usb_main.h"
 1591              		.file 47 "tmk_core/protocol/arm_atsam/./usb/udd.h"
 1592              		.file 48 "tmk_core/protocol/arm_atsam/./usb/udi_cdc.h"
 1593              		.file 49 "<built-in>"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 usb2422.c
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:18     .text.USB_write2422_block:0000000000000000 $t
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:26     .text.USB_write2422_block:0000000000000000 USB_write2422_block
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:131    .text.USB_write2422_block:0000000000000068 $d
                            *COM*:0000000000000022 i2c0_buf
                            *COM*:0000000000000100 USB2422_shadow
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:140    .text.USB2422_init:0000000000000000 $t
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:147    .text.USB2422_init:0000000000000000 USB2422_init
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:516    .text.USB2422_init:0000000000000208 $d
                            *COM*:0000000000000001 usb_extra_manual
                            *COM*:0000000000000001 usb_gcr_auto
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:528    .text.USB_reset:0000000000000000 $t
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:535    .text.USB_reset:0000000000000000 USB_reset
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:583    .text.USB_reset:0000000000000030 $d
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:589    .text.USB_configure:0000000000000000 $t
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:596    .text.USB_configure:0000000000000000 USB_configure
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:781    .text.USB_configure:00000000000000d4 $d
                            *COM*:0000000000000002 adc_extra
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:794    .text.USB_active:0000000000000000 $t
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:801    .text.USB_active:0000000000000000 USB_active
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:818    .text.USB_active:000000000000000c $d
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:823    .text.USB_set_host_by_voltage:0000000000000000 $t
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:830    .text.USB_set_host_by_voltage:0000000000000000 USB_set_host_by_voltage
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:1012   .text.USB_set_host_by_voltage:00000000000000c0 $d
                            *COM*:0000000000000001 usb_host_port
                            *COM*:0000000000000001 usb_extra_state
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:1026   .text.USB2422_Port_Detect_Init:0000000000000000 $t
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:1033   .text.USB2422_Port_Detect_Init:0000000000000000 USB2422_Port_Detect_Init
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:1165   .text.USB2422_Port_Detect_Init:0000000000000088 $d
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:1173   .text.USB_ExtraSetState:0000000000000000 $t
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:1180   .text.USB_ExtraSetState:0000000000000000 USB_ExtraSetState
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:1292   .text.USB_ExtraSetState:0000000000000064 $d
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:1307   .text.USB_HandleExtraDevice:0000000000000000 $t
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:1314   .text.USB_HandleExtraDevice:0000000000000000 USB_HandleExtraDevice
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:1464   .text.USB_HandleExtraDevice:0000000000000090 $d
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:1492   .rodata:0000000000000000 SERNAME
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:1522   .rodata:0000000000000030 PRDNAME
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:1506   .rodata:0000000000000016 MFRNAME
                            *COM*:0000000000000010 dmac_desc_wb
                            *COM*:0000000000000010 dmac_desc
/var/folders/z4/wxlp73js78g02fcv9dbq6g8h0000gn/T//ccrN8Pw7.s:1488   .rodata:0000000000000000 $d

UNDEFINED SYMBOLS
i2c0_transmit
CLK_delay_us
debug_code
adc_get
i2c0_init
SR_EXP_WriteData
v_5v
sr_exp_data
memset
memcpy
_srom
CLK_delay_ms
v_con_2
v_con_1_boot
v_con_2_boot
v_con_1
__aeabi_uldivmod
timer_read64
CDC_print
__aeabi_i2d
__aeabi_dmul
__aeabi_dadd
__aeabi_d2uiz
